(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{E4a3:function(e,t,n){e.exports=n.p+"static/function-call.fc60389d.png"},ZKHr:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),o=n.n(a),l=n("dEAq"),c=n("H1Ra"),r=o.a.memo((e=>{e.demos;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"markdown"},o.a.createElement("h1",{id:"react-\u5e94\u7528\u7684\u542f\u52a8\u8fc7\u7a0b"},o.a.createElement(l["AnchorLink"],{to:"#react-\u5e94\u7528\u7684\u542f\u52a8\u8fc7\u7a0b","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"React \u5e94\u7528\u7684\u542f\u52a8\u8fc7\u7a0b"),o.a.createElement("p",null,"\u5728\u524d\u6587",o.a.createElement(l["Link"],{to:"./reconciler-workflow"},o.a.createElement("code",null,"reconciler \u8fd0\u4f5c\u6d41\u7a0b")),"\u628a",o.a.createElement("code",null,"reconciler"),"\u7684\u6d41\u7a0b\u5f52\u7ed3\u6210 4 \u4e2a\u6b65\u9aa4."),o.a.createElement("p",null,"\u672c\u7ae0\u8282\u4e3b\u8981\u8bb2\u89e3",o.a.createElement("code",null,"react"),"\u5e94\u7528\u7a0b\u5e8f\u7684\u542f\u52a8\u8fc7\u7a0b, \u4f4d\u4e8e",o.a.createElement("code",null,"react-dom"),"\u5305, \u8854\u63a5",o.a.createElement("code",null,"reconciler \u8fd0\u4f5c\u6d41\u7a0b"),"\u4e2d\u7684",o.a.createElement(l["AnchorLink"],{to:"./reconciler-workflow#%E8%BE%93%E5%85%A5"},o.a.createElement("code",null,"\u8f93\u5165")),"\u6b65\u9aa4."),o.a.createElement("p",null,"\u5728\u6b63\u5f0f\u5206\u6790\u6e90\u7801\u4e4b\u524d, \u5148\u4e86\u89e3\u4e00\u4e0b",o.a.createElement("code",null,"react"),"\u5e94\u7528\u7684",o.a.createElement("code",null,"\u542f\u52a8\u6a21\u5f0f"),":"),o.a.createElement("p",null,"\u5728\u5f53\u524d\u7a33\u5b9a\u7248",o.a.createElement("code",null,"react@17.0.2"),"\u6e90\u7801\u4e2d, \u6709 3 \u79cd\u542f\u52a8\u65b9\u5f0f. \u5148\u5f15\u51fa\u5b98\u7f51\u4e0a\u5bf9\u4e8e",o.a.createElement(l["Link"],{to:"https://zh-hans.reactjs.org/docs/concurrent-mode-adoption.html#why-so-many-modes"},"\u8fd9 3 \u79cd\u6a21\u5f0f\u7684\u4ecb\u7ecd"),", \u5176\u57fa\u672c\u8bf4\u660e\u5982\u4e0b:"),o.a.createElement("ol",null,o.a.createElement("li",null,o.a.createElement("p",null,o.a.createElement("code",null,"legacy")," \u6a21\u5f0f: ",o.a.createElement("code",null,"ReactDOM.render(<App />, rootNode)"),". \u8fd9\u662f\u5f53\u524d React app \u4f7f\u7528\u7684\u65b9\u5f0f. \u8fd9\u4e2a\u6a21\u5f0f\u53ef\u80fd\u4e0d\u652f\u6301",o.a.createElement(l["Link"],{to:"https://zh-hans.reactjs.org/docs/concurrent-mode-patterns.html#the-three-steps"},"\u8fd9\u4e9b\u65b0\u529f\u80fd(concurrent \u652f\u6301\u7684\u6240\u6709\u529f\u80fd)"),"."),o.a.createElement(c["a"],{code:"// LegacyRoot\nReactDOM.render(<App />, document.getElementById('root'), dom => {}); // \u652f\u6301callback\u56de\u8c03, \u53c2\u6570\u662f\u4e00\u4e2adom\u5bf9\u8c61",lang:"js"})),o.a.createElement("li",null,o.a.createElement("p",null,o.a.createElement(l["Link"],{to:"https://zh-hans.reactjs.org/docs/concurrent-mode-adoption.html#migration-step-blocking-mode"},"Blocking \u6a21\u5f0f"),": ",o.a.createElement("code",null,"ReactDOM.createBlockingRoot(rootNode).render(<App />)"),". \u76ee\u524d\u6b63\u5728\u5b9e\u9a8c\u4e2d, \u5b83\u4ec5\u63d0\u4f9b\u4e86 ",o.a.createElement("code",null,"concurrent")," \u6a21\u5f0f\u7684\u5c0f\u90e8\u5206\u529f\u80fd, \u4f5c\u4e3a\u8fc1\u79fb\u5230 ",o.a.createElement("code",null,"concurrent")," \u6a21\u5f0f\u7684\u7b2c\u4e00\u4e2a\u6b65\u9aa4."),o.a.createElement(c["a"],{code:"// BlockingRoot\n// 1. \u521b\u5efaReactDOMRoot\u5bf9\u8c61\nconst reactDOMBlockingRoot = ReactDOM.createBlockingRoot(\n  document.getElementById('root'),\n);\n// 2. \u8c03\u7528render\nreactDOMBlockingRoot.render(<App />); // \u4e0d\u652f\u6301\u56de\u8c03",lang:"js"})),o.a.createElement("li",null,o.a.createElement("p",null,o.a.createElement(l["Link"],{to:"https://zh-hans.reactjs.org/docs/concurrent-mode-adoption.html#enabling-concurrent-mode"},"Concurrent \u6a21\u5f0f"),": ",o.a.createElement("code",null,"ReactDOM.createRoot(rootNode).render(<App />)"),". \u76ee\u524d\u5728\u5b9e\u9a8c\u4e2d, \u672a\u6765\u7a33\u5b9a\u4e4b\u540e\uff0c\u6253\u7b97\u4f5c\u4e3a React \u7684\u9ed8\u8ba4\u5f00\u53d1\u6a21\u5f0f. \u8fd9\u4e2a\u6a21\u5f0f\u5f00\u542f\u4e86\u6240\u6709\u7684\u65b0\u529f\u80fd."),o.a.createElement(c["a"],{code:"// ConcurrentRoot\n// 1. \u521b\u5efaReactDOMRoot\u5bf9\u8c61\nconst reactDOMRoot = ReactDOM.createRoot(document.getElementById('root'));\n// 2. \u8c03\u7528render\nreactDOMRoot.render(<App />); // \u4e0d\u652f\u6301\u56de\u8c03",lang:"js"}))),o.a.createElement("p",null,"\u6ce8\u610f: \u867d\u7136",o.a.createElement("code",null,"17.0.2"),"\u7684\u6e90\u7801\u4e2d\u6709",o.a.createElement(l["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-dom/src/client/ReactDOM.js#L202"},o.a.createElement("code",null,"createRoot"),"\u548c",o.a.createElement("code",null,"createBlockingRoot"),"\u65b9\u6cd5"),"(\u5982\u679c\u81ea\u884c\u6784\u5efa, ",o.a.createElement(l["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/scripts/rollup/build.js#L30-L35"},"\u4f1a\u9ed8\u8ba4\u6784\u5efa",o.a.createElement("code",null,"experimental"),"\u7248\u672c"),"), \u4f46\u662f\u7a33\u5b9a\u7248\u7684\u6784\u5efa\u5165\u53e3",o.a.createElement(l["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-dom/index.stable.js"},"\u6392\u9664\u6389\u4e86\u8fd9\u4e24\u4e2a api"),", \u6240\u4ee5\u5b9e\u9645\u5728",o.a.createElement("code",null,"npm i react-dom"),"\u5b89\u88c5",o.a.createElement("code",null,"17.0.2"),"\u7a33\u5b9a\u7248\u540e, \u4e0d\u80fd\u4f7f\u7528\u8be5 api.\u5982\u679c\u8981\u60f3\u4f53\u9a8c\u975e",o.a.createElement("code",null,"legacy"),"\u6a21\u5f0f, \u9700\u8981",o.a.createElement(l["Link"],{to:"https://github.com/reactwg/react-18/discussions/9"},"\u663e\u793a\u5b89\u88c5 alpha \u7248\u672c"),"(\u6216\u81ea\u884c\u6784\u5efa)."),o.a.createElement("h2",{id:"\u542f\u52a8\u6d41\u7a0b"},o.a.createElement(l["AnchorLink"],{to:"#\u542f\u52a8\u6d41\u7a0b","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u542f\u52a8\u6d41\u7a0b"),o.a.createElement("p",null,"\u5728\u8c03\u7528\u5165\u53e3\u51fd\u6570\u4e4b\u524d,",o.a.createElement("code",null,"reactElement(<App/>)"),"\u548c DOM \u5bf9\u8c61",o.a.createElement("code",null,"div#root"),"\u4e4b\u95f4\u6ca1\u6709\u5173\u8054, \u7528\u56fe\u7247\u8868\u793a\u5982\u4e0b:"),o.a.createElement("p",null,o.a.createElement("img",{src:n("bjEC"),alt:""})),o.a.createElement("h3",{id:"\u521b\u5efa\u5168\u5c40\u5bf9\u8c61-create-global-obj"},o.a.createElement(l["AnchorLink"],{to:"#\u521b\u5efa\u5168\u5c40\u5bf9\u8c61-create-global-obj","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u521b\u5efa\u5168\u5c40\u5bf9\u8c61 ","{","#create-global-obj","}"),o.a.createElement("p",null,"\u65e0\u8bba",o.a.createElement("code",null,"Legacy, Concurrent\u6216Blocking"),"\u6a21\u5f0f, react \u5728\u521d\u59cb\u5316\u65f6, \u90fd\u4f1a\u521b\u5efa 3 \u4e2a\u5168\u5c40\u5bf9\u8c61"),o.a.createElement("ol",null,o.a.createElement("li",null,o.a.createElement(l["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-dom/src/client/ReactDOMRoot.js#L62-L72"},o.a.createElement("code",null,"ReactDOM(Blocking)Root"),"\u5bf9\u8c61"))),o.a.createElement("ul",null,o.a.createElement("li",null,"\u5c5e\u4e8e",o.a.createElement("code",null,"react-dom"),"\u5305, \u8be5\u5bf9\u8c61",o.a.createElement(l["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-dom/src/client/ReactDOMRoot.js#L62-L104"},"\u66b4\u9732\u6709",o.a.createElement("code",null,"render,unmount"),"\u65b9\u6cd5"),", \u901a\u8fc7\u8c03\u7528\u8be5\u5b9e\u4f8b\u7684",o.a.createElement("code",null,"render"),"\u65b9\u6cd5, \u53ef\u4ee5\u5f15\u5bfc react \u5e94\u7528\u7684\u542f\u52a8.")),o.a.createElement("ol",{start:2},o.a.createElement("li",null,o.a.createElement("p",null,o.a.createElement(l["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberRoot.old.js#L83-L103"},o.a.createElement("code",null,"fiberRoot"),"\u5bf9\u8c61")),o.a.createElement("ul",null,o.a.createElement("li",null,"\u5c5e\u4e8e",o.a.createElement("code",null,"react-reconciler"),"\u5305, \u4f5c\u4e3a",o.a.createElement("code",null,"react-reconciler"),"\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u7684\u5168\u5c40\u4e0a\u4e0b\u6587, \u4fdd\u5b58 fiber \u6784\u5efa\u8fc7\u7a0b\u4e2d\u6240\u4f9d\u8d56\u7684\u5168\u5c40\u72b6\u6001."),o.a.createElement("li",null,"\u5176\u5927\u90e8\u5206\u5b9e\u4f8b\u53d8\u91cf\u7528\u6765\u5b58\u50a8",o.a.createElement("code",null,"fiber \u6784\u9020\u5faa\u73af"),"(\u8be6\u89c1",o.a.createElement(l["Link"],{to:"./workloop"},o.a.createElement("code",null,"\u4e24\u5927\u5de5\u4f5c\u5faa\u73af")),")\u8fc7\u7a0b\u7684\u5404\u79cd\u72b6\u6001.react \u5e94\u7528\u5185\u90e8, \u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u5b9e\u4f8b\u53d8\u91cf\u7684\u503c, \u63a7\u5236\u6267\u884c\u903b\u8f91."))),o.a.createElement("li",null,o.a.createElement("p",null,o.a.createElement(l["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiber.old.js#L431-L449"},o.a.createElement("code",null,"HostRootFiber"),"\u5bf9\u8c61")),o.a.createElement("ul",null,o.a.createElement("li",null,"\u5c5e\u4e8e",o.a.createElement("code",null,"react-reconciler"),"\u5305, \u8fd9\u662f react \u5e94\u7528\u4e2d\u7684\u7b2c\u4e00\u4e2a Fiber \u5bf9\u8c61, \u662f Fiber \u6811\u7684\u6839\u8282\u70b9, \u8282\u70b9\u7684\u7c7b\u578b\u662f",o.a.createElement("code",null,"HostRoot"),".")))),o.a.createElement("p",null,"\u8fd9 3 \u4e2a\u5bf9\u8c61\u662f react \u4f53\u7cfb\u5f97\u4ee5\u8fd0\u884c\u7684\u57fa\u672c\u4fdd\u969c, \u4e00\u7ecf\u521b\u5efa\u5927\u591a\u6570\u573a\u666f\u4e0d\u4f1a\u518d\u9500\u6bc1(\u9664\u975e\u5378\u8f7d\u6574\u4e2a\u5e94\u7528",o.a.createElement("code",null,"root.unmount()"),")."),o.a.createElement("p",null,"\u8fd9\u4e00\u8fc7\u7a0b\u662f\u4ece",o.a.createElement("code",null,"react-dom"),"\u5305\u53d1\u8d77, \u5185\u90e8\u8c03\u7528\u4e86",o.a.createElement("code",null,"react-reconciler"),"\u5305, \u6838\u5fc3\u6d41\u7a0b\u56fe\u5982\u4e0b(\u5176\u4e2d\u7ea2\u8272\u6807\u6ce8\u4e86 3 \u4e2a\u5bf9\u8c61\u7684\u521b\u5efa\u65f6\u673a)."),o.a.createElement("p",null,o.a.createElement("img",{src:n("E4a3"),alt:""})),o.a.createElement("p",null,"\u4e0b\u9762\u9010\u4e00\u89e3\u91ca\u8fd9 3 \u4e2a\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b."),o.a.createElement("h3",{id:"\u521b\u5efa-reactdomblockingroot-\u5bf9\u8c61"},o.a.createElement(l["AnchorLink"],{to:"#\u521b\u5efa-reactdomblockingroot-\u5bf9\u8c61","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u521b\u5efa ReactDOM(Blocking)Root \u5bf9\u8c61"),o.a.createElement("p",null,"\u7531\u4e8e 3 \u79cd\u6a21\u5f0f\u542f\u52a8\u7684 api \u6709\u6240\u4e0d\u540c, \u6240\u4ee5\u4ece\u6e90\u7801\u4e0a\u8ffd\u8e2a, \u4e5f\u5bf9\u5e94\u4e86 3 \u79cd\u65b9\u5f0f. \u6700\u7ec8\u90fd new \u4e00\u4e2a",o.a.createElement("code",null,"ReactDOMRoot"),"\u6216",o.a.createElement("code",null,"ReactDOMBlockingRoot"),"\u7684\u5b9e\u4f8b, \u9700\u8981\u521b\u5efa\u8fc7\u7a0b\u4e2d",o.a.createElement("code",null,"RootTag"),"\u53c2\u6570, 3 \u79cd\u6a21\u5f0f\u5404\u4e0d\u76f8\u540c. \u8be5",o.a.createElement("code",null,"RootTag"),"\u7684\u7c7b\u578b\u51b3\u5b9a\u4e86\u6574\u4e2a react \u5e94\u7528\u662f\u5426\u652f\u6301",o.a.createElement(l["AnchorLink"],{to:"#%E5%8F%AF%E4%B8%AD%E6%96%AD%E6%B8%B2%E6%9F%93"},"\u53ef\u4e2d\u65ad\u6e32\u67d3(\u540e\u6587\u6709\u89e3\u91ca)"),"."),o.a.createElement("p",null,"\u4e0b\u9762\u6839\u636e 3 \u79cd mode \u4e0b\u7684\u542f\u52a8\u51fd\u6570\u9010\u4e00\u5206\u6790."),o.a.createElement("h4",{id:"legacy-\u6a21\u5f0f"},o.a.createElement(l["AnchorLink"],{to:"#legacy-\u6a21\u5f0f","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"legacy \u6a21\u5f0f"),o.a.createElement("p",null,o.a.createElement("code",null,"legacy"),"\u6a21\u5f0f\u8868\u9762\u4e0a\u662f\u76f4\u63a5\u8c03\u7528",o.a.createElement("code",null,"ReactDOM.render"),", \u8ddf\u8e2a",o.a.createElement("code",null,"ReactDOM.render"),"\u540e\u7eed\u8c03\u7528",o.a.createElement("code",null,"legacyRenderSubtreeIntoContainer"),"(",o.a.createElement(l["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-dom/src/client/ReactDOMLegacy.js#L175-L222"},"\u6e90\u7801\u94fe\u63a5"),")"),o.a.createElement(c["a"],{code:"function legacyRenderSubtreeIntoContainer(\n  parentComponent: ?React$Component<any, any>,\n  children: ReactNodeList,\n  container: Container,\n  forceHydrate: boolean,\n  callback: ?Function,\n) {\n  let root: RootType = (container._reactRootContainer: any);\n  let fiberRoot;\n  if (!root) {\n    // \u521d\u6b21\u8c03\u7528, root\u8fd8\u672a\u521d\u59cb\u5316, \u4f1a\u8fdb\u5165\u6b64\u5206\u652f\n    //1. \u521b\u5efaReactDOMRoot\u5bf9\u8c61, \u521d\u59cb\u5316react\u5e94\u7528\u73af\u5883\n    root = container._reactRootContainer = legacyCreateRootFromDOMContainer(\n      container,\n      forceHydrate,\n    );\n    fiberRoot = root._internalRoot;\n    if (typeof callback === 'function') {\n      const originalCallback = callback;\n      callback = function() {\n        // instance\u6700\u7ec8\u6307\u5411 children(\u5165\u53c2: \u5982<App/>)\u751f\u6210\u7684dom\u8282\u70b9\n        const instance = getPublicRootInstance(fiberRoot);\n        originalCallback.call(instance);\n      };\n    }\n    // 2. \u66f4\u65b0\u5bb9\u5668\n    unbatchedUpdates(() => {\n      updateContainer(children, fiberRoot, parentComponent, callback);\n    });\n  } else {\n    // root\u5df2\u7ecf\u521d\u59cb\u5316, \u4e8c\u6b21\u8c03\u7528render\u4f1a\u8fdb\u5165\n    // 1. \u83b7\u53d6FiberRoot\u5bf9\u8c61\n    fiberRoot = root._internalRoot;\n    if (typeof callback === 'function') {\n      const originalCallback = callback;\n      callback = function() {\n        const instance = getPublicRootInstance(fiberRoot);\n        originalCallback.call(instance);\n      };\n    }\n    // 2. \u8c03\u7528\u66f4\u65b0\n    updateContainer(children, fiberRoot, parentComponent, callback);\n  }\n  return getPublicRootInstance(fiberRoot);\n}",lang:"js"}),o.a.createElement("p",null,"\u7ee7\u7eed\u8ddf\u8e2a",o.a.createElement("code",null,"legacyCreateRootFromDOMContainer"),". \u6700\u540e\u8c03\u7528",o.a.createElement("code",null,"new ReactDOMBlockingRoot(container, LegacyRoot, options);")),o.a.createElement(c["a"],{code:"function legacyCreateRootFromDOMContainer(\n  container: Container,\n  forceHydrate: boolean,\n): RootType {\n  const shouldHydrate =\n    forceHydrate || shouldHydrateDueToLegacyHeuristic(container);\n  return createLegacyRoot(\n    container,\n    shouldHydrate\n      ? {\n          hydrate: true,\n        }\n      : undefined,\n  );\n}\n\nexport function createLegacyRoot(\n  container: Container,\n  options?: RootOptions,\n): RootType {\n  return new ReactDOMBlockingRoot(container, LegacyRoot, options); // \u6ce8\u610f\u8fd9\u91cc\u7684LegacyRoot\u662f\u56fa\u5b9a\u7684, \u5e76\u4e0d\u662f\u5916\u754c\u4f20\u5165\u7684\n}",lang:"js"}),o.a.createElement("p",null,"\u901a\u8fc7\u4ee5\u4e0a\u5206\u6790,",o.a.createElement("code",null,"legacy"),"\u6a21\u5f0f\u4e0b\u8c03\u7528",o.a.createElement("code",null,"ReactDOM.render"),"\u6709 2 \u4e2a\u6838\u5fc3\u6b65\u9aa4:"),o.a.createElement("ol",null,o.a.createElement("li",null,"\u521b\u5efa",o.a.createElement("code",null,"ReactDOMBlockingRoot"),"\u5b9e\u4f8b(\u5728 Concurrent \u6a21\u5f0f\u548c Blocking \u6a21\u5f0f\u4e2d\u8be6\u7ec6\u5206\u6790\u8be5\u7c7b), \u521d\u59cb\u5316 react \u5e94\u7528\u73af\u5883."),o.a.createElement("li",null,"\u8c03\u7528",o.a.createElement("code",null,"updateContainer"),"\u8fdb\u884c\u66f4\u65b0.")),o.a.createElement("h4",{id:"concurrent-\u6a21\u5f0f\u548c-blocking-\u6a21\u5f0f"},o.a.createElement(l["AnchorLink"],{to:"#concurrent-\u6a21\u5f0f\u548c-blocking-\u6a21\u5f0f","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"Concurrent \u6a21\u5f0f\u548c Blocking \u6a21\u5f0f"),o.a.createElement("p",null,o.a.createElement("code",null,"Concurrent"),"\u6a21\u5f0f\u548c",o.a.createElement("code",null,"Blocking"),"\u6a21\u5f0f\u4ece\u8c03\u7528\u65b9\u5f0f\u4e0a\u76f4\u63a5\u53ef\u4ee5\u770b\u51fa"),o.a.createElement("ol",null,o.a.createElement("li",null,"\u5206\u522b\u8c03\u7528",o.a.createElement("code",null,"ReactDOM.createRoot"),"\u548c",o.a.createElement("code",null,"ReactDOM.createBlockingRoot"),"\u521b\u5efa",o.a.createElement("code",null,"ReactDOMRoot"),"\u548c",o.a.createElement("code",null,"ReactDOMBlockingRoot"),"\u5b9e\u4f8b"),o.a.createElement("li",null,"\u8c03\u7528",o.a.createElement("code",null,"ReactDOMRoot"),"\u548c",o.a.createElement("code",null,"ReactDOMBlockingRoot"),"\u5b9e\u4f8b\u7684",o.a.createElement("code",null,"render"),"\u65b9\u6cd5")),o.a.createElement(c["a"],{code:"export function createRoot(\n  container: Container,\n  options?: RootOptions,\n): RootType {\n  return new ReactDOMRoot(container, options);\n}\n\nexport function createBlockingRoot(\n  container: Container,\n  options?: RootOptions,\n): RootType {\n  return new ReactDOMBlockingRoot(container, BlockingRoot, options); // \u6ce8\u610f\u7b2c2\u4e2a\u53c2\u6570BlockingRoot\u662f\u56fa\u5b9a\u5199\u6b7b\u7684\n}",lang:"js"}),o.a.createElement("p",null,"\u7ee7\u7eed\u67e5\u770b",o.a.createElement("code",null,"ReactDOMRoot"),"\u548c",o.a.createElement("code",null,"ReactDOMBlockingRoot"),"\u5bf9\u8c61"),o.a.createElement(c["a"],{code:"function ReactDOMRoot(container: Container, options: void | RootOptions) {\n  // \u521b\u5efa\u4e00\u4e2afiberRoot\u5bf9\u8c61, \u5e76\u5c06\u5176\u6302\u8f7d\u5230this._internalRoot\u4e4b\u4e0a\n  this._internalRoot = createRootImpl(container, ConcurrentRoot, options);\n}\nfunction ReactDOMBlockingRoot(\n  container: Container,\n  tag: RootTag,\n  options: void | RootOptions,\n) {\n  // \u521b\u5efa\u4e00\u4e2afiberRoot\u5bf9\u8c61, \u5e76\u5c06\u5176\u6302\u8f7d\u5230this._internalRoot\u4e4b\u4e0a\n  this._internalRoot = createRootImpl(container, tag, options);\n}\n\nReactDOMRoot.prototype.render = ReactDOMBlockingRoot.prototype.render = function(\n  children: ReactNodeList,\n): void {\n  const root = this._internalRoot;\n  // \u6267\u884c\u66f4\u65b0\n  updateContainer(children, root, null, null);\n};\n\nReactDOMRoot.prototype.unmount = ReactDOMBlockingRoot.prototype.unmount = function(): void {\n  const root = this._internalRoot;\n  const container = root.containerInfo;\n  // \u6267\u884c\u66f4\u65b0\n  updateContainer(null, root, null, () => {\n    unmarkContainerAsRoot(container);\n  });\n};",lang:"js"}),o.a.createElement("p",null,o.a.createElement("code",null,"ReactDOMRoot"),"\u548c",o.a.createElement("code",null,"ReactDOMBlockingRoot"),"\u6709\u76f8\u540c\u7684\u7279\u6027"),o.a.createElement("ol",null,o.a.createElement("li",null,"\u8c03\u7528",o.a.createElement("code",null,"createRootImpl"),"\u521b\u5efa",o.a.createElement("code",null,"fiberRoot"),"\u5bf9\u8c61, \u5e76\u5c06\u5176\u6302\u8f7d\u5230",o.a.createElement("code",null,"this._internalRoot"),"\u4e0a."),o.a.createElement("li",null,"\u539f\u578b\u4e0a\u6709",o.a.createElement("code",null,"render"),"\u548c",o.a.createElement("code",null,"unmount"),"\u65b9\u6cd5, \u4e14\u5185\u90e8\u90fd\u4f1a\u8c03\u7528",o.a.createElement("code",null,"updateContainer"),"\u8fdb\u884c\u66f4\u65b0.")),o.a.createElement("h3",{id:"\u521b\u5efa-fiberroot-\u5bf9\u8c61-create-root-impl"},o.a.createElement(l["AnchorLink"],{to:"#\u521b\u5efa-fiberroot-\u5bf9\u8c61-create-root-impl","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u521b\u5efa fiberRoot \u5bf9\u8c61 ","{","#create-root-impl","}"),o.a.createElement("p",null,"\u65e0\u8bba\u54ea\u79cd\u6a21\u5f0f\u4e0b, \u5728",o.a.createElement("code",null,"ReactDOM(Blocking)Root"),"\u7684\u521b\u5efa\u8fc7\u7a0b\u4e2d, \u90fd\u4f1a\u8c03\u7528\u4e00\u4e2a\u76f8\u540c\u7684\u51fd\u6570",o.a.createElement("code",null,"createRootImpl"),", \u67e5\u770b\u540e\u7eed\u7684\u51fd\u6570\u8c03\u7528, \u6700\u540e\u4f1a\u521b\u5efa",o.a.createElement("code",null,"fiberRoot \u5bf9\u8c61"),"(\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d, \u7279\u522b\u6ce8\u610f",o.a.createElement("code",null,"RootTag"),"\u7684\u4f20\u9012\u8fc7\u7a0b):"),o.a.createElement(c["a"],{code:"// \u6ce8\u610f: 3\u79cd\u6a21\u5f0f\u4e0b\u7684tag\u662f\u5404\u4e0d\u76f8\u540c(\u5206\u522b\u662fConcurrentRoot,BlockingRoot,LegacyRoot).\nthis._internalRoot = createRootImpl(container, tag, options);",lang:"js"}),o.a.createElement(c["a"],{code:"function createRootImpl(\n  container: Container,\n  tag: RootTag,\n  options: void | RootOptions,\n) {\n  // ... \u7701\u7565\u90e8\u5206\u6e90\u7801(\u6709\u5173hydrate\u670d\u52a1\u7aef\u6e32\u67d3\u7b49, \u6682\u65f6\u7528\u4e0d\u4e0a)\n  // 1. \u521b\u5efafiberRoot\n  const root = createContainer(container, tag, hydrate, hydrationCallbacks); // \u6ce8\u610fRootTag\u7684\u4f20\u9012\n  // 2. \u6807\u8bb0dom\u5bf9\u8c61, \u628adom\u548cfiber\u5bf9\u8c61\u5173\u8054\u8d77\u6765\n  markContainerAsRoot(root.current, container);\n  // ...\u7701\u7565\u90e8\u5206\u65e0\u5173\u4ee3\u7801\n  return root;\n}",lang:"js"}),o.a.createElement(c["a"],{code:"export function createContainer(\n  containerInfo: Container,\n  tag: RootTag,\n  hydrate: boolean,\n  hydrationCallbacks: null | SuspenseHydrationCallbacks,\n): OpaqueRoot {\n  // \u521b\u5efafiberRoot\u5bf9\u8c61\n  return createFiberRoot(containerInfo, tag, hydrate, hydrationCallbacks); // \u6ce8\u610fRootTag\u7684\u4f20\u9012\n}",lang:"js"}),o.a.createElement("h3",{id:"\u521b\u5efa-hostrootfiber-\u5bf9\u8c61"},o.a.createElement(l["AnchorLink"],{to:"#\u521b\u5efa-hostrootfiber-\u5bf9\u8c61","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u521b\u5efa HostRootFiber \u5bf9\u8c61"),o.a.createElement("p",null,"\u5728",o.a.createElement("code",null,"createFiberRoot"),"\u4e2d, \u521b\u5efa\u4e86",o.a.createElement("code",null,"react"),"\u5e94\u7528\u7684\u9996\u4e2a",o.a.createElement("code",null,"fiber"),"\u5bf9\u8c61, \u79f0\u4e3a",o.a.createElement("code",null,"HostRootFiber(fiber.tag = HostRoot)")),o.a.createElement(c["a"],{code:"export function createFiberRoot(\n  containerInfo: any,\n  tag: RootTag,\n  hydrate: boolean,\n  hydrationCallbacks: null | SuspenseHydrationCallbacks,\n): FiberRoot {\n  // \u521b\u5efafiberRoot\u5bf9\u8c61, \u6ce8\u610fRootTag\u7684\u4f20\u9012\n  const root: FiberRoot = (new FiberRootNode(containerInfo, tag, hydrate): any);\n\n  // 1. \u8fd9\u91cc\u521b\u5efa\u4e86`react`\u5e94\u7528\u7684\u9996\u4e2a`fiber`\u5bf9\u8c61, \u79f0\u4e3a`HostRootFiber`\n  const uninitializedFiber = createHostRootFiber(tag);\n  root.current = uninitializedFiber;\n  uninitializedFiber.stateNode = root;\n  // 2. \u521d\u59cb\u5316HostRootFiber\u7684updateQueue\n  initializeUpdateQueue(uninitializedFiber);\n\n  return root;\n}",lang:"js"}),o.a.createElement("p",null,"\u5728\u521b\u5efa",o.a.createElement("code",null,"HostRootFiber"),"\u65f6, \u5176\u4e2d",o.a.createElement("code",null,"fiber.mode"),"\u5c5e\u6027, \u4f1a\u4e0e 3 \u79cd",o.a.createElement("code",null,"RootTag"),"(",o.a.createElement("code",null,"ConcurrentRoot"),",",o.a.createElement("code",null,"BlockingRoot"),",",o.a.createElement("code",null,"LegacyRoot"),")\u5173\u8054\u8d77\u6765."),o.a.createElement(c["a"],{code:"export function createHostRootFiber(tag: RootTag): Fiber {\n  let mode;\n  if (tag === ConcurrentRoot) {\n    mode = ConcurrentMode | BlockingMode | StrictMode;\n  } else if (tag === BlockingRoot) {\n    mode = BlockingMode | StrictMode;\n  } else {\n    mode = NoMode;\n  }\n  return createFiber(HostRoot, null, null, mode); // \u6ce8\u610f\u8fd9\u91cc\u8bbe\u7f6e\u7684mode\u5c5e\u6027\u662f\u7531RootTag\u51b3\u5b9a\u7684\n}",lang:"js"}),o.a.createElement("p",null,"\u6ce8\u610f:",o.a.createElement("code",null,"fiber"),"\u6811\u4e2d\u6240\u6709\u8282\u70b9\u7684",o.a.createElement("code",null,"mode"),"\u90fd\u4f1a\u548c",o.a.createElement("code",null,"HostRootFiber.mode"),"\u4e00\u81f4(\u65b0\u5efa\u7684 fiber \u8282\u70b9, \u5176 mode \u6765\u6e90\u4e8e\u7236\u8282\u70b9),\u6240\u4ee5",o.a.createElement("strong",null,"HostRootFiber.mode"),"\u975e\u5e38\u91cd\u8981, \u5b83\u51b3\u5b9a\u4e86\u4ee5\u540e\u6574\u4e2a fiber \u6811\u6784\u5efa\u8fc7\u7a0b."),o.a.createElement("p",null,"\u8fd0\u884c\u5230\u8fd9\u91cc, 3 \u4e2a\u5bf9\u8c61\u521b\u5efa\u6210\u529f, ",o.a.createElement("code",null,"react"),"\u5e94\u7528\u7684\u521d\u59cb\u5316\u5b8c\u6bd5."),o.a.createElement("p",null,"\u5c06\u6b64\u523b\u5185\u5b58\u4e2d\u5404\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\u60c5\u51b5\u8868\u793a\u51fa\u6765:"),o.a.createElement("ol",null,o.a.createElement("li",null,"legacy")),o.a.createElement("p",null,o.a.createElement("img",{src:n("pQdL"),alt:""})),o.a.createElement("ol",{start:2},o.a.createElement("li",null,"concurrent")),o.a.createElement("p",null,o.a.createElement("img",{src:n("uaEa"),alt:""})),o.a.createElement("ol",{start:3},o.a.createElement("li",null,"blocking")),o.a.createElement("p",null,o.a.createElement("img",{src:n("n0Nz"),alt:""})),o.a.createElement("p",null,"\u6ce8\u610f:"),o.a.createElement("ol",null,o.a.createElement("li",null,"3 \u79cd\u6a21\u5f0f\u4e0b,",o.a.createElement("code",null,"HostRootFiber.mode"),"\u662f\u4e0d\u4e00\u81f4\u7684"),o.a.createElement("li",null,"legacy \u4e0b, ",o.a.createElement("code",null,"div#root"),"\u548c",o.a.createElement("code",null,"ReactDOMBlockingRoot"),"\u4e4b\u95f4\u901a\u8fc7",o.a.createElement("code",null,"_reactRootContainer"),"\u5173\u8054. \u5176\u4ed6\u6a21\u5f0f\u662f\u6ca1\u6709\u5173\u8054\u7684"),o.a.createElement("li",null,"\u6b64\u65f6",o.a.createElement("code",null,"reactElement(<App/>)"),"\u8fd8\u662f\u72ec\u7acb\u5728\u5916\u7684, \u8fd8\u6ca1\u6709\u548c\u76ee\u524d\u521b\u5efa\u7684 3 \u4e2a\u5168\u5c40\u5bf9\u8c61\u5173\u8054\u8d77\u6765")),o.a.createElement("h2",{id:"\u8c03\u7528\u66f4\u65b0\u5165\u53e3"},o.a.createElement(l["AnchorLink"],{to:"#\u8c03\u7528\u66f4\u65b0\u5165\u53e3","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u8c03\u7528\u66f4\u65b0\u5165\u53e3"),o.a.createElement("ol",null,o.a.createElement("li",null,"legacy \u56de\u5230",o.a.createElement("code",null,"legacyRenderSubtreeIntoContainer"),"\u51fd\u6570\u4e2d\u6709:")),o.a.createElement(c["a"],{code:"// 2. \u66f4\u65b0\u5bb9\u5668\nunbatchedUpdates(() => {\n  updateContainer(children, fiberRoot, parentComponent, callback);\n});",lang:"js"}),o.a.createElement("ol",{start:2},o.a.createElement("li",null,"concurrent \u548c blocking \u5728",o.a.createElement("code",null,"ReactDOM(Blocking)Root"),"\u539f\u578b\u4e0a\u6709",o.a.createElement("code",null,"render"),"\u65b9\u6cd5")),o.a.createElement(c["a"],{code:"ReactDOMRoot.prototype.render = ReactDOMBlockingRoot.prototype.render = function(\n  children: ReactNodeList,\n): void {\n  const root = this._internalRoot;\n  // \u6267\u884c\u66f4\u65b0\n  updateContainer(children, root, null, null);\n};",lang:"js"}),o.a.createElement("p",null,"\u76f8\u540c\u70b9:"),o.a.createElement("ol",null,o.a.createElement("li",null,"3 \u79cd\u6a21\u5f0f\u5728\u8c03\u7528\u66f4\u65b0\u65f6\u90fd\u4f1a\u6267\u884c",o.a.createElement("code",null,"updateContainer"),". ",o.a.createElement("code",null,"updateContainer"),"\u51fd\u6570\u4e32\u8054\u4e86",o.a.createElement("code",null,"react-dom"),"\u4e0e",o.a.createElement("code",null,"react-reconciler"),", \u4e4b\u540e\u7684\u903b\u8f91\u8fdb\u5165\u4e86",o.a.createElement("code",null,"react-reconciler"),"\u5305.")),o.a.createElement("p",null,"\u4e0d\u540c\u70b9:"),o.a.createElement("ol",null,o.a.createElement("li",null,o.a.createElement("p",null,o.a.createElement("code",null,"legacy"),"\u4e0b\u7684\u66f4\u65b0\u4f1a\u5148\u8c03\u7528",o.a.createElement("code",null,"unbatchedUpdates"),", \u66f4\u6539\u6267\u884c\u4e0a\u4e0b\u6587\u4e3a",o.a.createElement("code",null,"LegacyUnbatchedContext"),", \u4e4b\u540e\u8c03\u7528",o.a.createElement("code",null,"updateContainer"),"\u8fdb\u884c\u66f4\u65b0.")),o.a.createElement("li",null,o.a.createElement("p",null,o.a.createElement("code",null,"concurrent"),"\u548c",o.a.createElement("code",null,"blocking"),"\u4e0d\u4f1a\u66f4\u6539\u6267\u884c\u4e0a\u4e0b\u6587, \u76f4\u63a5\u8c03\u7528",o.a.createElement("code",null,"updateContainer"),"\u8fdb\u884c\u66f4\u65b0."))),o.a.createElement("p",null,"\u7ee7\u7eed\u8ddf\u8e2a",o.a.createElement(l["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberReconciler.old.js#L250-L321"},o.a.createElement("code",null,"updateContainer"),"\u51fd\u6570")),o.a.createElement(c["a"],{code:"export function updateContainer(\n  element: ReactNodeList,\n  container: OpaqueRoot,\n  parentComponent: ?React$Component<any, any>,\n  callback: ?Function,\n): Lane {\n  const current = container.current;\n  // 1. \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6233, \u8ba1\u7b97\u672c\u6b21\u66f4\u65b0\u7684\u4f18\u5148\u7ea7\n  const eventTime = requestEventTime();\n  const lane = requestUpdateLane(current);\n\n  // 2. \u8bbe\u7f6efiber.updateQueue\n  const update = createUpdate(eventTime, lane);\n  update.payload = { element };\n  callback = callback === undefined ? null : callback;\n  if (callback !== null) {\n    update.callback = callback;\n  }\n  enqueueUpdate(current, update);\n\n  // 3. \u8fdb\u5165reconciler\u8fd0\u4f5c\u6d41\u7a0b\u4e2d\u7684`\u8f93\u5165`\u73af\u8282\n  scheduleUpdateOnFiber(current, lane, eventTime);\n  return lane;\n}",lang:"js"}),o.a.createElement("p",null,o.a.createElement("code",null,"updateContainer"),"\u51fd\u6570\u4f4d\u4e8e",o.a.createElement("code",null,"react-reconciler"),"\u5305\u4e2d, \u5b83\u4e32\u8054\u4e86",o.a.createElement("code",null,"react-dom"),"\u4e0e",o.a.createElement("code",null,"react-reconciler"),". \u6b64\u5904\u6682\u65f6\u4e0d\u6df1\u5165\u5206\u6790",o.a.createElement("code",null,"updateContainer"),"\u51fd\u6570\u7684\u5177\u4f53\u529f\u80fd, \u9700\u8981\u5173\u6ce8\u5176\u6700\u540e\u8c03\u7528\u4e86",o.a.createElement("code",null,"scheduleUpdateOnFiber"),"."),o.a.createElement("p",null,"\u5728\u524d\u6587",o.a.createElement(l["Link"],{to:"./reconciler-workflow"},o.a.createElement("code",null,"reconciler \u8fd0\u4f5c\u6d41\u7a0b")),"\u4e2d, \u91cd\u70b9\u5206\u6790\u8fc7",o.a.createElement("code",null,"scheduleUpdateOnFiber"),"\u662f",o.a.createElement("code",null,"\u8f93\u5165"),"\u9636\u6bb5\u7684\u5165\u53e3\u51fd\u6570."),o.a.createElement("p",null,"\u6240\u4ee5\u5230\u6b64\u4e3a\u6b62, \u901a\u8fc7\u8c03\u7528",o.a.createElement("code",null,"react-dom"),"\u5305\u7684",o.a.createElement("code",null,"api"),"(\u5982: ",o.a.createElement("code",null,"ReactDOM.render"),"), ",o.a.createElement("code",null,"react"),"\u5185\u90e8\u7ecf\u8fc7\u4e00\u7cfb\u5217\u8fd0\u8f6c, \u5b8c\u6210\u4e86\u521d\u59cb\u5316, \u5e76\u4e14\u8fdb\u5165\u4e86",o.a.createElement("code",null,"reconciler \u8fd0\u4f5c\u6d41\u7a0b"),"\u7684\u7b2c\u4e00\u4e2a\u9636\u6bb5."),o.a.createElement("h2",{id:"\u601d\u8003"},o.a.createElement(l["AnchorLink"],{to:"#\u601d\u8003","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u601d\u8003"),o.a.createElement("h3",{id:"\u53ef\u4e2d\u65ad\u6e32\u67d3"},o.a.createElement(l["AnchorLink"],{to:"#\u53ef\u4e2d\u65ad\u6e32\u67d3","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u53ef\u4e2d\u65ad\u6e32\u67d3"),o.a.createElement("p",null,"react \u4e2d\u6700\u5e7f\u4e3a\u4eba\u77e5\u7684\u53ef\u4e2d\u65ad\u6e32\u67d3(render \u53ef\u4ee5\u4e2d\u65ad, \u90e8\u5206\u751f\u547d\u5468\u671f\u51fd\u6570\u6709\u53ef\u80fd\u6267\u884c\u591a\u6b21, ",o.a.createElement("code",null,"UNSAFE_componentWillMount"),",",o.a.createElement("code",null,"UNSAFE_componentWillReceiveProps"),")\u53ea\u6709\u5728",o.a.createElement("code",null,"HostRootFiber.mode === ConcurrentRoot | BlockingRoot"),"\u624d\u4f1a\u5f00\u542f. \u5982\u679c\u4f7f\u7528\u7684\u662f",o.a.createElement("code",null,"legacy"),", \u5373\u901a\u8fc7",o.a.createElement("code",null,"ReactDOM.render(<App/>, dom)"),"\u8fd9\u79cd\u65b9\u5f0f\u542f\u52a8\u65f6",o.a.createElement("code",null,"HostRootFiber.mode = NoMode"),", \u8fd9\u79cd\u60c5\u51b5\u4e0b\u65e0\u8bba\u662f\u9996\u6b21 render \u8fd8\u662f\u540e\u7eed update \u90fd\u53ea\u4f1a\u8fdb\u5165\u540c\u6b65\u5de5\u4f5c\u5faa\u73af, ",o.a.createElement("code",null,"reconciliation"),"\u6ca1\u6709\u673a\u4f1a\u4e2d\u65ad, \u6240\u4ee5\u751f\u547d\u5468\u671f\u51fd\u6570\u53ea\u4f1a\u8c03\u7528\u4e00\u6b21."),o.a.createElement("p",null,"\u5bf9\u4e8e",o.a.createElement("code",null,"\u53ef\u4e2d\u65ad\u6e32\u67d3"),"\u7684\u5ba3\u4f20\u6700\u65e9\u6765\u81ea",o.a.createElement(l["Link"],{to:"http://conf2017.reactjs.org/speakers/lin"},"2017 \u5e74 Lin Clark \u7684\u6f14\u8bb2"),". \u6f14\u8bb2\u4e2d\u9610\u8ff0\u4e86\u672a\u6765 react \u4f1a\u5e94\u7528 fiber \u67b6\u6784, ",o.a.createElement("code",null,"reconciliation\u53ef\u4e2d\u65ad"),"\u7b49(13:15 \u79d2). \u5728",o.a.createElement(l["Link"],{to:"https://github.com/facebook/react/blob/master/CHANGELOG.md#1610-november-9-2017"},o.a.createElement("code",null,"v16.1.0")),"\u4e2d\u5e94\u7528\u4e86 fiber."),o.a.createElement("p",null,"\u5728\u6700\u65b0\u7a33\u5b9a\u7248",o.a.createElement(l["Link"],{to:"https://github.com/facebook/react/blob/main/CHANGELOG.md#1702-march-22-2021"},o.a.createElement("code",null,"v17.0.2")),"\u4e2d, ",o.a.createElement("code",null,"\u53ef\u4e2d\u65ad\u6e32\u67d3"),"\u867d\u7136\u5b9e\u73b0, \u4f46\u662f\u5e76\u6ca1\u6709\u5728\u7a33\u5b9a\u7248\u66b4\u9732\u51fa api. \u53ea\u80fd",o.a.createElement(l["Link"],{to:"https://github.com/reactwg/react-18/discussions/9"},"\u5b89\u88c5 alpha \u7248\u672c"),"\u624d\u80fd\u4f53\u9a8c\u8be5\u7279\u6027."),o.a.createElement("p",null,"\u4f46\u662f\u4e0d\u5c11\u5f00\u53d1\u4eba\u5458\u8ba4\u4e3a\u7a33\u5b9a\u7248\u672c\u7684",o.a.createElement("code",null,"react"),"\u5df2\u7ecf\u662f\u53ef\u4e2d\u65ad\u6e32\u67d3(\u5176\u5b9e\u662f\u6709\u8bef\u533a\u7684), \u5927\u6982\u7387\u4e5f\u662f\u53d7\u5230\u4e86\u5404\u7c7b\u5ba3\u4f20\u6587\u7ae0\u7684\u5f71\u54cd. \u524d\u7aef\u5927\u73af\u5883\u8fd8\u662f\u6bd4\u8f83\u6d6e\u8e81\u7684, \u5728\u5f53\u4e0b, \u66f4\u9700\u8981\u9759\u4e0b\u5fc3\u6765\u5b66\u4e60."),o.a.createElement("h2",{id:"\u603b\u7ed3"},o.a.createElement(l["AnchorLink"],{to:"#\u603b\u7ed3","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u603b\u7ed3"),o.a.createElement("p",null,"\u672c\u7ae0\u8282\u4ecb\u7ecd\u4e86",o.a.createElement("code",null,"react"),"\u5e94\u7528\u7684 3 \u79cd\u542f\u52a8\u65b9\u5f0f. \u5206\u6790\u4e86\u542f\u52a8\u540e\u521b\u5efa\u4e86 3 \u4e2a\u5173\u952e\u5bf9\u8c61, \u5e76\u7ed8\u5236\u4e86\u5bf9\u8c61\u5728\u5185\u5b58\u4e2d\u7684\u5f15\u7528\u5173\u7cfb. \u542f\u52a8\u8fc7\u7a0b\u6700\u540e\u8c03\u7528",o.a.createElement("code",null,"updateContainer"),"\u8fdb\u5165",o.a.createElement("code",null,"react-reconciler"),"\u5305,\u8fdb\u800c\u8c03\u7528",o.a.createElement("code",null,"schedulerUpdateOnFiber"),"\u51fd\u6570, \u4e0e",o.a.createElement("code",null,"reconciler\u8fd0\u4f5c\u6d41\u7a0b"),"\u4e2d\u7684",o.a.createElement("code",null,"\u8f93\u5165"),"\u9636\u6bb5\u76f8\u8854\u63a5.")))}));t["default"]=e=>{var t=o.a.useContext(l["context"]),n=t.demos;return o.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&l["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),o.a.createElement(r,{demos:n})}},bjEC:function(e,t){e.exports="data:image/png;base64,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"},n0Nz:function(e,t,n){e.exports=n.p+"static/process-blocking.9620703d.png"},pQdL:function(e,t,n){e.exports=n.p+"static/process-legacy.a0ae413a.png"},uaEa:function(e,t,n){e.exports=n.p+"static/process-concurrent.aa0863d6.png"}}]);