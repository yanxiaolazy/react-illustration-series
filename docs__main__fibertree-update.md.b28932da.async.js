(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"/Hwl":function(e,n,l){e.exports=l.p+"static/unitofwork3.0.ffe89e27.png"},"0bM2":function(e,n,l){e.exports=l.p+"static/unitofwork7.6fbed9e7.png"},"9MJJ":function(e,n,l){e.exports=l.p+"static/unitofwork6.93afc810.png"},E5lV:function(e,n,l){e.exports=l.p+"static/unitofwork4.85439736.png"},JoUT:function(e,n,l){e.exports=l.p+"static/unitofwork1.0886b093.png"},Xchk:function(e,n,l){e.exports=l.p+"static/unitofwork0.8f6fe64b.png"},b75X:function(e,n,l){e.exports=l.p+"static/unitofwork3.1.e5924810.png"},dSH0:function(e,n,l){e.exports=l.p+"static/unitofwork8.6dbc0fcd.png"},e2SG:function(e,n,l){e.exports=l.p+"static/status-refreshstack.8258f660.png"},"j/Ui":function(e,n,l){e.exports=l.p+"static/beforeupdate.037e56d7.png"},sD8s:function(e,n,l){e.exports=l.p+"static/fibertree-beforecommit.6a2f1987.png"},tUJF:function(e,n,l){e.exports=l.p+"static/unitofwork5.33dd8189.png"},tX4W:function(e,n,l){"use strict";l.r(n);var t=l("q1tI"),a=l.n(t),r=l("dEAq"),c=l("H1Ra"),o=a.a.memo((e=>{e.demos;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h1",{id:"fiber-\u6811\u6784\u9020\u5bf9\u6bd4\u66f4\u65b0"},a.a.createElement(r["AnchorLink"],{to:"#fiber-\u6811\u6784\u9020\u5bf9\u6bd4\u66f4\u65b0","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"fiber \u6811\u6784\u9020(\u5bf9\u6bd4\u66f4\u65b0)"),a.a.createElement("p",null,"\u5728\u524d\u6587",a.a.createElement(r["Link"],{to:"./fibertree-create"},"fiber \u6811\u6784\u9020(\u521d\u6b21\u521b\u5efa)"),"\u4e00\u6587\u7684\u4ecb\u7ecd\u4e2d, \u6f14\u793a\u4e86",a.a.createElement("code",null,"fiber\u6811\u6784\u9020\u5faa\u73af"),"\u4e2d\u9010\u6b65\u6784\u9020",a.a.createElement("code",null,"fiber\u6811"),"\u7684\u8fc7\u7a0b. \u7531\u4e8e\u662f\u521d\u6b21\u521b\u5efa, \u6240\u4ee5\u5728\u6784\u9020\u8fc7\u7a0b\u4e2d, \u6240\u6709\u8282\u70b9\u90fd\u662f\u65b0\u5efa, \u5e76\u6ca1\u6709\u590d\u7528\u65e7\u8282\u70b9."),a.a.createElement("p",null,"\u672c\u8282\u8ba8\u8bba",a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u8fd9\u79cd\u60c5\u51b5(\u5728",a.a.createElement("code",null,"Legacy"),"\u6a21\u5f0f\u4e0b\u8fdb\u884c\u5206\u6790). \u5728\u9605\u8bfb\u672c\u8282\u4e4b\u524d, \u6700\u597d\u5bf9",a.a.createElement(r["Link"],{to:"./fibertree-create"},"fiber \u6811\u6784\u9020(\u521d\u6b21\u521b\u5efa)"),"\u6709\u4e00\u4e9b\u4e86\u89e3, \u5176\u4e2d\u6709\u5f88\u591a\u76f8\u4f3c\u903b\u8f91\u4e0d\u518d\u91cd\u590d\u53d9\u8ff0, \u672c\u8282\u91cd\u70b9\u7a81\u51fa",a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u4e0e",a.a.createElement("code",null,"\u521d\u6b21\u521b\u5efa"),"\u7684\u4e0d\u540c\u4e4b\u5904."),a.a.createElement("p",null,"\u672c\u8282\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b(",a.a.createElement(r["Link"],{to:"https://codesandbox.io/s/angry-williams-l1mze?file=/src/App.js"},"codesandbox \u5730\u5740"),"):"),a.a.createElement(c["a"],{code:"import React from 'react';\n\nclass App extends React.Component {\n  state = {\n    list: ['A', 'B', 'C'],\n  };\n  onChange = () => {\n    this.setState({ list: ['C', 'A', 'X'] });\n  };\n  componentDidMount() {\n    console.log(`App Mount`);\n  }\n  render() {\n    return (\n      <>\n        <Header />\n        <button onClick={this.onChange}>change</button>\n        <div className=\"content\">\n          {this.state.list.map(item => (\n            <p key={item}>{item}</p>\n          ))}\n        </div>\n      </>\n    );\n  }\n}\n\nclass Header extends React.PureComponent {\n  render() {\n    return (\n      <>\n        <h1>title</h1>\n        <h2>title2</h2>\n      </>\n    );\n  }\n}\nexport default App;",lang:"js"}),a.a.createElement("p",null,"\u5728",a.a.createElement("code",null,"\u521d\u6b21\u6e32\u67d3"),"\u5b8c\u6210\u4e4b\u540e, \u4e0e",a.a.createElement("code",null,"fiber\u6811"),"\u76f8\u5173\u7684\u5185\u5b58\u7ed3\u6784\u5982\u4e0b(\u540e\u6587\u4ee5\u6b64\u56fe\u4e3a\u57fa\u7840, \u6f14\u793a",a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u8fc7\u7a0b):"),a.a.createElement("p",null,a.a.createElement("img",{src:l("j/Ui"),alt:""})),a.a.createElement("h2",{id:"\u66f4\u65b0\u5165\u53e3"},a.a.createElement(r["AnchorLink"],{to:"#\u66f4\u65b0\u5165\u53e3","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u66f4\u65b0\u5165\u53e3"),a.a.createElement("p",null,"\u524d\u6587",a.a.createElement(r["AnchorLink"],{to:"./reconciler-workflow#%E8%BE%93%E5%85%A5"},"reconciler \u8fd0\u4f5c\u6d41\u7a0b"),"\u4e2d\u603b\u7ed3\u7684 4 \u4e2a\u9636\u6bb5(\u4ece\u8f93\u5165\u5230\u8f93\u51fa), \u5176\u4e2d\u627f\u63a5\u8f93\u5165\u7684\u51fd\u6570\u53ea\u6709",a.a.createElement("code",null,"scheduleUpdateOnFiber"),"(",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberWorkLoop.old.js#L517-L619"},"\u6e90\u7801\u5730\u5740"),").\u5728",a.a.createElement("code",null,"react-reconciler"),"\u5bf9\u5916\u66b4\u9732\u7684 api \u51fd\u6570\u4e2d, \u53ea\u8981\u6d89\u53ca\u5230\u9700\u8981\u6539\u53d8 fiber \u7684\u64cd\u4f5c(\u65e0\u8bba\u662f",a.a.createElement("code",null,"\u9996\u6b21\u6e32\u67d3"),"\u6216",a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"), \u6700\u540e\u90fd\u4f1a\u95f4\u63a5\u8c03\u7528",a.a.createElement("code",null,"scheduleUpdateOnFiber"),", ",a.a.createElement("code",null,"scheduleUpdateOnFiber"),"\u51fd\u6570\u662f\u8f93\u5165\u94fe\u8def\u4e2d\u7684",a.a.createElement("code",null,"\u5fc5\u7ecf\u4e4b\u8def"),"."),a.a.createElement("h3",{id:"3-\u79cd\u66f4\u65b0\u65b9\u5f0f"},a.a.createElement(r["AnchorLink"],{to:"#3-\u79cd\u66f4\u65b0\u65b9\u5f0f","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"3 \u79cd\u66f4\u65b0\u65b9\u5f0f"),a.a.createElement("p",null,"\u5982\u8981\u4e3b\u52a8\u53d1\u8d77\u66f4\u65b0, \u6709 3 \u79cd\u5e38\u89c1\u65b9\u5f0f:"),a.a.createElement("ol",null,a.a.createElement("li",null,a.a.createElement("code",null,"Class"),"\u7ec4\u4ef6\u4e2d\u8c03\u7528",a.a.createElement("code",null,"setState"),"."),a.a.createElement("li",null,a.a.createElement("code",null,"Function"),"\u7ec4\u4ef6\u4e2d\u8c03\u7528",a.a.createElement("code",null,"hook"),"\u5bf9\u8c61\u66b4\u9732\u51fa\u7684",a.a.createElement("code",null,"dispatchAction"),"."),a.a.createElement("li",null,"\u5728",a.a.createElement("code",null,"container"),"\u8282\u70b9\u4e0a\u91cd\u590d\u8c03\u7528",a.a.createElement("code",null,"render"),"(",a.a.createElement(r["Link"],{to:"https://reactjs.org/docs/rendering-elements.html#react-only-updates-whats-necessary"},"\u5b98\u7f51\u793a\u4f8b"),")")),a.a.createElement("p",null,"\u4e0b\u9762\u5217\u51fa\u8fd9 3 \u79cd\u66f4\u65b0\u65b9\u5f0f\u7684\u6e90\u7801:"),a.a.createElement("h4",{id:"setstate"},a.a.createElement(r["AnchorLink"],{to:"#setstate","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"setState"),a.a.createElement("p",null,"\u5728",a.a.createElement("code",null,"Component"),"\u5bf9\u8c61\u7684\u539f\u578b\u4e0a\u6302\u8f7d\u6709",a.a.createElement("code",null,"setState"),"(",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react/src/ReactBaseClasses.js#L57-L66"},"\u6e90\u7801\u94fe\u63a5"),"):"),a.a.createElement(c["a"],{code:"Component.prototype.setState = function(partialState, callback) {\n  this.updater.enqueueSetState(this, partialState, callback, 'setState');\n};",lang:"js"}),a.a.createElement("p",null,"\u5728",a.a.createElement(r["Link"],{to:"./fibertree-create"},"fiber \u6811\u6784\u9020(\u521d\u6b21\u521b\u5efa)"),"\u4e2d\u7684",a.a.createElement("code",null,"beginWork"),"\u9636\u6bb5, class \u7c7b\u578b\u7684\u7ec4\u4ef6\u521d\u59cb\u5316\u5b8c\u6210\u4e4b\u540e, ",a.a.createElement("code",null,"this.updater"),"\u5bf9\u8c61\u5982\u4e0b(",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberClassComponent.old.js#L193-L225"},"\u6e90\u7801\u94fe\u63a5"),"):"),a.a.createElement(c["a"],{code:"const classComponentUpdater = {\n  isMounted,\n  enqueueSetState(inst, payload, callback) {\n    // 1. \u83b7\u53d6class\u5b9e\u4f8b\u5bf9\u5e94\u7684fiber\u8282\u70b9\n    const fiber = getInstance(inst);\n    // 2. \u521b\u5efaupdate\u5bf9\u8c61\n    const eventTime = requestEventTime();\n    const lane = requestUpdateLane(fiber); // \u786e\u5b9a\u5f53\u524dupdate\u5bf9\u8c61\u7684\u4f18\u5148\u7ea7\n    const update = createUpdate(eventTime, lane);\n    update.payload = payload;\n    if (callback !== undefined && callback !== null) {\n      update.callback = callback;\n    }\n    // 3. \u5c06update\u5bf9\u8c61\u6dfb\u52a0\u5230\u5f53\u524dFiber\u8282\u70b9\u7684updateQueue\u961f\u5217\u5f53\u4e2d\n    enqueueUpdate(fiber, update);\n    // 4. \u8fdb\u5165reconciler\u8fd0\u4f5c\u6d41\u7a0b\u4e2d\u7684`\u8f93\u5165`\u73af\u8282\n    scheduleUpdateOnFiber(fiber, lane, eventTime); // \u4f20\u5165\u7684lane\u662fupdate\u4f18\u5148\u7ea7\n  },\n};",lang:"js"}),a.a.createElement("h4",{id:"dispatchaction"},a.a.createElement(r["AnchorLink"],{to:"#dispatchaction","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"dispatchAction"),a.a.createElement("blockquote",null,a.a.createElement("p",null,"\u6b64\u5904\u53ea\u662f\u4e3a\u4e86\u5bf9\u6bd4",a.a.createElement("code",null,"dispatchAction"),"\u548c",a.a.createElement("code",null,"setState"),". \u6709\u5173",a.a.createElement("code",null,"hook"),"\u539f\u7406\u7684\u6df1\u5165\u5206\u6790, \u5728",a.a.createElement("code",null,"hook \u539f\u7406"),"\u7ae0\u8282\u4e2d\u8be6\u7ec6\u8ba8\u8bba.")),a.a.createElement("p",null,"\u5728",a.a.createElement("code",null,"function\u7c7b\u578b"),"\u7ec4\u4ef6\u4e2d, \u5982\u679c\u4f7f\u7528",a.a.createElement("code",null,"hook(useState)"),", \u5219\u53ef\u4ee5\u901a\u8fc7",a.a.createElement("code",null,"hook api"),"\u66b4\u9732\u51fa\u7684",a.a.createElement("code",null,"dispatchAction"),"(",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberHooks.old.js#L1645-L1753"},"\u6e90\u7801\u94fe\u63a5"),")\u6765\u66f4\u65b0"),a.a.createElement(c["a"],{code:"function dispatchAction<S, A>(\n  fiber: Fiber,\n  queue: UpdateQueue<S, A>,\n  action: A,\n) {\n  // 1. \u521b\u5efaupdate\u5bf9\u8c61\n  const eventTime = requestEventTime();\n  const lane = requestUpdateLane(fiber); // \u786e\u5b9a\u5f53\u524dupdate\u5bf9\u8c61\u7684\u4f18\u5148\u7ea7\n  const update: Update<S, A> = {\n    lane,\n    action,\n    eagerReducer: null,\n    eagerState: null,\n    next: (null: any),\n  };\n  // 2. \u5c06update\u5bf9\u8c61\u6dfb\u52a0\u5230\u5f53\u524dHook\u5bf9\u8c61\u7684updateQueue\u961f\u5217\u5f53\u4e2d\n  const pending = queue.pending;\n  if (pending === null) {\n    update.next = update;\n  } else {\n    update.next = pending.next;\n    pending.next = update;\n  }\n  queue.pending = update;\n  // 3. \u8bf7\u6c42\u8c03\u5ea6, \u8fdb\u5165reconciler\u8fd0\u4f5c\u6d41\u7a0b\u4e2d\u7684`\u8f93\u5165`\u73af\u8282.\n  scheduleUpdateOnFiber(fiber, lane, eventTime); // \u4f20\u5165\u7684lane\u662fupdate\u4f18\u5148\u7ea7\n}",lang:"js"}),a.a.createElement("h4",{id:"\u91cd\u590d\u8c03\u7528-render"},a.a.createElement(r["AnchorLink"],{to:"#\u91cd\u590d\u8c03\u7528-render","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u91cd\u590d\u8c03\u7528 render"),a.a.createElement(c["a"],{code:"import ReactDOM from 'react-dom';\nfunction tick() {\n  const element = (\n    <div>\n      <h1>Hello, world!</h1>\n      <h2>It is {new Date().toLocaleTimeString()}.</h2>\n    </div>\n  );\n  ReactDOM.render(element, document.getElementById('root'));\n}\nsetInterval(tick, 1000);",lang:"js"}),a.a.createElement("p",null,"\u5bf9\u4e8e\u91cd\u590d",a.a.createElement("code",null,"render"),", \u5728",a.a.createElement(r["Link"],{to:"./bootstrap"},"React \u5e94\u7528\u7684\u542f\u52a8\u8fc7\u7a0b"),"\u4e2d\u5df2\u6709\u8bf4\u660e, \u8c03\u7528\u8def\u5f84\u5305\u542b",a.a.createElement("code",null,"updateContainer--\x3escheduleUpdateOnFiber")),a.a.createElement("blockquote",null,a.a.createElement("p",null,"\u6545\u65e0\u8bba\u4ece\u54ea\u4e2a\u5165\u53e3\u8fdb\u884c\u66f4\u65b0, \u6700\u7ec8\u90fd\u4f1a\u8fdb\u5165",a.a.createElement("code",null,"scheduleUpdateOnFiber"),", \u518d\u6b21\u8bc1\u660e",a.a.createElement("code",null,"scheduleUpdateOnFiber"),"\u662f",a.a.createElement("code",null,"\u8f93\u5165"),"\u9636\u6bb5\u7684\u5fc5\u7ecf\u51fd\u6570(\u53c2\u8003",a.a.createElement(r["Link"],{to:"./reconciler-workflow"},"reconciler \u8fd0\u4f5c\u6d41\u7a0b"),").")),a.a.createElement("h2",{id:"\u6784\u9020\u9636\u6bb5"},a.a.createElement(r["AnchorLink"],{to:"#\u6784\u9020\u9636\u6bb5","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u6784\u9020\u9636\u6bb5"),a.a.createElement("p",null,"\u903b\u8f91\u6765\u5230",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberWorkLoop.old.js#L517-L619"},"scheduleUpdateOnFiber"),"\u51fd\u6570:"),a.a.createElement(c["a"],{code:"// ...\u7701\u7565\u90e8\u5206\u4ee3\u7801\nexport function scheduleUpdateOnFiber(\n  fiber: Fiber, // fiber\u8868\u793a\u88ab\u66f4\u65b0\u7684\u8282\u70b9\n  lane: Lane, // lane\u8868\u793aupdate\u4f18\u5148\u7ea7\n  eventTime: number,\n) {\n  const root = markUpdateLaneFromFiberToRoot(fiber, lane);\n  if (lane === SyncLane) {\n    if (\n      (executionContext & LegacyUnbatchedContext) !== NoContext &&\n      (executionContext & (RenderContext | CommitContext)) === NoContext\n    ) {\n      // \u521d\u6b21\u6e32\u67d3\n      performSyncWorkOnRoot(root);\n    } else {\n      // \u5bf9\u6bd4\u66f4\u65b0\n      ensureRootIsScheduled(root, eventTime);\n    }\n  }\n  mostRecentlyUpdatedRoot = root;\n}",lang:"js"}),a.a.createElement("p",null,a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u4e0e",a.a.createElement("code",null,"\u521d\u6b21\u6e32\u67d3"),"\u7684\u4e0d\u540c\u70b9:"),a.a.createElement("ol",null,a.a.createElement("li",null,a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberWorkLoop.old.js#L625-L667"},"markUpdateLaneFromFiberToRoot"),"\u51fd\u6570, \u53ea\u5728",a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u9636\u6bb5\u624d\u53d1\u6325\u51fa\u5b83\u7684\u4f5c\u7528, \u5b83\u627e\u51fa\u4e86",a.a.createElement("code",null,"fiber\u6811"),"\u4e2d\u53d7\u5230\u672c\u6b21",a.a.createElement("code",null,"update"),"\u5f71\u54cd\u7684\u6240\u6709\u8282\u70b9, \u5e76\u8bbe\u7f6e\u8fd9\u4e9b\u8282\u70b9\u7684",a.a.createElement("code",null,"fiber.lanes"),"\u6216",a.a.createElement("code",null,"fiber.childLanes"),"(\u5728",a.a.createElement("code",null,"legacy"),"\u6a21\u5f0f\u4e0b\u4e3a",a.a.createElement("code",null,"SyncLane"),")\u4ee5\u5907",a.a.createElement("code",null,"fiber\u6811\u6784\u9020"),"\u9636\u6bb5\u4f7f\u7528.")),a.a.createElement(c["a"],{code:"function markUpdateLaneFromFiberToRoot(\n  sourceFiber: Fiber, // sourceFiber\u8868\u793a\u88ab\u66f4\u65b0\u7684\u8282\u70b9\n  lane: Lane, // lane\u8868\u793aupdate\u4f18\u5148\u7ea7\n): FiberRoot | null {\n  // 1. \u5c06update\u4f18\u5148\u7ea7\u8bbe\u7f6e\u5230sourceFiber.lanes\n  sourceFiber.lanes = mergeLanes(sourceFiber.lanes, lane);\n  let alternate = sourceFiber.alternate;\n  if (alternate !== null) {\n    // \u540c\u65f6\u8bbe\u7f6esourceFiber.alternate\u7684\u4f18\u5148\u7ea7\n    alternate.lanes = mergeLanes(alternate.lanes, lane);\n  }\n  // 2. \u4ecesourceFiber\u5f00\u59cb, \u5411\u4e0a\u904d\u5386\u6240\u6709\u8282\u70b9, \u76f4\u5230HostRoot. \u8bbe\u7f6e\u6cbf\u9014\u6240\u6709\u8282\u70b9(\u5305\u62ecalternate)\u7684childLanes\n  let node = sourceFiber;\n  let parent = sourceFiber.return;\n  while (parent !== null) {\n    parent.childLanes = mergeLanes(parent.childLanes, lane);\n    alternate = parent.alternate;\n    if (alternate !== null) {\n      alternate.childLanes = mergeLanes(alternate.childLanes, lane);\n    }\n    node = parent;\n    parent = parent.return;\n  }\n  if (node.tag === HostRoot) {\n    const root: FiberRoot = node.stateNode;\n    return root;\n  } else {\n    return null;\n  }\n}",lang:"js"}),a.a.createElement("h3",{id:"markupdatelanefromfibertoroot"},a.a.createElement(r["AnchorLink"],{to:"#markupdatelanefromfibertoroot","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"markUpdateLaneFromFiberToRoot"),a.a.createElement("p",null,"\u4e0b\u56fe\u8868\u793a\u4e86",a.a.createElement("code",null,"markUpdateLaneFromFiberToRoot"),"\u7684\u5177\u4f53\u4f5c\u7528:"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u4ee5",a.a.createElement("code",null,"sourceFiber"),"\u4e3a\u8d77\u70b9, \u8bbe\u7f6e\u8d77\u70b9\u7684",a.a.createElement("code",null,"fiber.lanes")),a.a.createElement("li",null,"\u4ece\u8d77\u70b9\u5f00\u59cb, \u76f4\u5230",a.a.createElement("code",null,"HostRootFiber"),", \u8bbe\u7f6e\u7236\u8def\u5f84\u4e0a\u6240\u6709\u8282\u70b9(\u4e5f\u5305\u62ec",a.a.createElement("code",null,"fiber.alternate"),")\u7684",a.a.createElement("code",null,"fiber.childLanes"),"."),a.a.createElement("li",null,"\u901a\u8fc7\u8bbe\u7f6e",a.a.createElement("code",null,"fiber.lanes"),"\u548c",a.a.createElement("code",null,"fiber.childLanes"),"\u5c31\u53ef\u4ee5\u8f85\u52a9\u5224\u65ad\u5b50\u6811\u662f\u5426\u9700\u8981\u66f4\u65b0(\u5728\u4e0b\u6587",a.a.createElement("code",null,"\u5faa\u73af\u6784\u9020"),"\u4e2d\u8be6\u7ec6\u8bf4\u660e).")),a.a.createElement("p",null,a.a.createElement("img",{src:l("y8D+"),alt:""})),a.a.createElement("ol",{start:2},a.a.createElement("li",null,a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u6ca1\u6709\u76f4\u63a5\u8c03\u7528",a.a.createElement("code",null,"performSyncWorkOnRoot"),", \u800c\u662f\u901a\u8fc7\u8c03\u5ea6\u4e2d\u5fc3\u6765\u5904\u7406, \u7531\u4e8e\u672c\u793a\u4f8b\u662f\u5728",a.a.createElement("code",null,"Legacy"),"\u6a21\u5f0f\u4e0b\u8fdb\u884c, \u6700\u540e\u4f1a\u540c\u6b65\u6267\u884c",a.a.createElement("code",null,"performSyncWorkOnRoot"),".(\u8be6\u7ec6\u539f\u7406\u53ef\u4ee5\u53c2\u8003",a.a.createElement(r["Link"],{to:"./scheduler"},"React \u8c03\u5ea6\u539f\u7406(scheduler)"),"). \u6240\u4ee5\u5176\u8c03\u7528\u94fe\u8def",a.a.createElement("code",null,"performSyncWorkOnRoot---\x3erenderRootSync---\x3eworkLoopSync"),"\u4e0e",a.a.createElement("code",null,"\u521d\u6b21\u6784\u9020"),"\u4e2d\u7684\u4e00\u81f4.")),a.a.createElement("p",null,"\u5728",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberWorkLoop.old.js#L1490-L1553"},"renderRootSync"),"\u4e2d:"),a.a.createElement(c["a"],{code:"function renderRootSync(root: FiberRoot, lanes: Lanes) {\n  const prevExecutionContext = executionContext;\n  executionContext |= RenderContext;\n  // \u5982\u679cfiberRoot\u53d8\u52a8, \u6216\u8005update.lane\u53d8\u52a8, \u90fd\u4f1a\u5237\u65b0\u6808\u5e27, \u4e22\u5f03\u4e0a\u4e00\u6b21\u6e32\u67d3\u8fdb\u5ea6\n  if (workInProgressRoot !== root || workInProgressRootRenderLanes !== lanes) {\n    // \u5237\u65b0\u6808\u5e27, legacy\u6a21\u5f0f\u4e0b\u90fd\u4f1a\u8fdb\u5165\n    prepareFreshStack(root, lanes);\n  }\n  do {\n    try {\n      workLoopSync();\n      break;\n    } catch (thrownValue) {\n      handleError(root, thrownValue);\n    }\n  } while (true);\n  executionContext = prevExecutionContext;\n  // \u91cd\u7f6e\u5168\u5c40\u53d8\u91cf, \u8868\u660erender\u7ed3\u675f\n  workInProgressRoot = null;\n  workInProgressRootRenderLanes = NoLanes;\n  return workInProgressRootExitStatus;\n}",lang:"js"}),a.a.createElement("p",null,"\u8fdb\u5165\u5faa\u73af\u6784\u9020(",a.a.createElement("code",null,"workLoopSync"),")\u524d, \u4f1a\u5237\u65b0\u6808\u5e27(\u8c03\u7528",a.a.createElement("code",null,"prepareFreshStack"),")(\u53c2\u8003",a.a.createElement(r["AnchorLink"],{to:"./fibertree-prepare#%E6%A0%88%E5%B8%A7%E7%AE%A1%E7%90%86"},"fiber \u6811\u6784\u9020(\u57fa\u7840\u51c6\u5907)"),"\u4e2d",a.a.createElement("code",null,"\u6808\u5e27\u7ba1\u7406"),")."),a.a.createElement("p",null,"\u6b64\u65f6\u7684\u5185\u5b58\u7ed3\u6784\u5982\u4e0b:"),a.a.createElement("p",null,a.a.createElement("img",{src:l("e2SG"),alt:""})),a.a.createElement("p",null,"\u6ce8\u610f:"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"fiberRoot.current"),"\u6307\u5411\u4e0e\u5f53\u524d\u9875\u9762\u5bf9\u5e94\u7684",a.a.createElement("code",null,"fiber\u6811"),", ",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411\u6b63\u5728\u6784\u9020\u7684",a.a.createElement("code",null,"fiber\u6811"),"."),a.a.createElement("li",null,"\u5237\u65b0\u6808\u5e27\u4f1a\u8c03\u7528",a.a.createElement("code",null,"createWorkInProgress()"),", \u4f7f\u5f97",a.a.createElement("code",null,"workInProgress.flags\u548cworkInProgress.effects"),"\u90fd\u5df2\u7ecf\u88ab\u91cd\u7f6e. \u4e14",a.a.createElement("code",null,"workInProgress.child = current.child"),". \u6240\u4ee5\u5728\u8fdb\u5165",a.a.createElement("code",null,"\u5faa\u73af\u6784\u9020"),"\u4e4b\u524d, ",a.a.createElement("code",null,"HostRootFiber"),"\u4e0e",a.a.createElement("code",null,"HostRootFiber.alternate"),"\u5171\u7528\u4e00\u4e2a",a.a.createElement("code",null,"child"),"(\u8fd9\u91cc\u662f",a.a.createElement("code",null,"fiber(<App/>)"),").")),a.a.createElement("h3",{id:"\u5faa\u73af\u6784\u9020"},a.a.createElement(r["AnchorLink"],{to:"#\u5faa\u73af\u6784\u9020","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u5faa\u73af\u6784\u9020"),a.a.createElement("p",null,"\u56de\u987e\u4e00\u4e0b",a.a.createElement(r["Link"],{to:"./fibertree-create"},"fiber \u6811\u6784\u9020(\u521d\u6b21\u521b\u5efa)"),"\u4e2d\u7684\u4ecb\u7ecd. \u6574\u4e2a",a.a.createElement("code",null,"fiber\u6811\u6784\u9020"),"\u662f\u4e00\u4e2a\u6df1\u5ea6\u4f18\u5148\u904d\u5386(\u53ef\u53c2\u8003",a.a.createElement(r["Link"],{to:"../algorithm/dfs"},"React \u7b97\u6cd5\u4e4b\u6df1\u5ea6\u4f18\u5148\u904d\u5386"),"), \u5176\u4e2d\u6709 2 \u4e2a\u91cd\u8981\u7684\u53d8\u91cf",a.a.createElement("code",null,"workInProgress"),"\u548c",a.a.createElement("code",null,"current"),"(\u53ef\u53c2\u8003",a.a.createElement(r["AnchorLink"],{to:"./fibertree-prepare#%E5%8F%8C%E7%BC%93%E5%86%B2%E6%8A%80%E6%9C%AF"},"fiber \u6811\u6784\u9020(\u57fa\u7840\u51c6\u5907)"),"\u4e2d\u4ecb\u7ecd\u7684",a.a.createElement("code",null,"\u53cc\u7f13\u51b2\u6280\u672f"),"):"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"workInProgress"),"\u548c",a.a.createElement("code",null,"current"),"\u90fd\u89c6\u4e3a\u6307\u9488"),a.a.createElement("li",null,a.a.createElement("code",null,"workInProgress"),"\u6307\u5411\u5f53\u524d\u6b63\u5728\u6784\u9020\u7684",a.a.createElement("code",null,"fiber"),"\u8282\u70b9"),a.a.createElement("li",null,a.a.createElement("code",null,"current = workInProgress.alternate"),"(\u5373",a.a.createElement("code",null,"fiber.alternate"),"), \u6307\u5411\u5f53\u524d\u9875\u9762\u6b63\u5728\u4f7f\u7528\u7684",a.a.createElement("code",null,"fiber"),"\u8282\u70b9.")),a.a.createElement("p",null,"\u5728\u6df1\u5ea6\u4f18\u5148\u904d\u5386\u4e2d, \u6bcf\u4e2a",a.a.createElement("code",null,"fiber"),"\u8282\u70b9\u90fd\u4f1a\u7ecf\u5386 2 \u4e2a\u9636\u6bb5:"),a.a.createElement("ol",null,a.a.createElement("li",null,"\u63a2\u5bfb\u9636\u6bb5 ",a.a.createElement("code",null,"beginWork")),a.a.createElement("li",null,"\u56de\u6eaf\u9636\u6bb5 ",a.a.createElement("code",null,"completeWork"))),a.a.createElement("p",null,"\u8fd9 2 \u4e2a\u9636\u6bb5\u5171\u540c\u5b8c\u6210\u4e86\u6bcf\u4e00\u4e2a",a.a.createElement("code",null,"fiber"),"\u8282\u70b9\u7684\u521b\u5efa(\u6216\u66f4\u65b0), \u6240\u6709",a.a.createElement("code",null,"fiber"),"\u8282\u70b9\u5219\u6784\u6210\u4e86",a.a.createElement("code",null,"fiber\u6811"),"."),a.a.createElement(c["a"],{code:"function workLoopSync() {\n  while (workInProgress !== null) {\n    performUnitOfWork(workInProgress);\n  }\n}\n\n// ... \u7701\u7565\u90e8\u5206\u65e0\u5173\u4ee3\u7801\nfunction performUnitOfWork(unitOfWork: Fiber): void {\n  // unitOfWork\u5c31\u662f\u88ab\u4f20\u5165\u7684workInProgress\n  const current = unitOfWork.alternate;\n  let next;\n  next = beginWork(current, unitOfWork, subtreeRenderLanes);\n  unitOfWork.memoizedProps = unitOfWork.pendingProps;\n  if (next === null) {\n    // \u5982\u679c\u6ca1\u6709\u6d3e\u751f\u51fa\u65b0\u7684\u8282\u70b9, \u5219\u8fdb\u5165completeWork\u9636\u6bb5, \u4f20\u5165\u7684\u662f\u5f53\u524dunitOfWork\n    completeUnitOfWork(unitOfWork);\n  } else {\n    workInProgress = next;\n  }\n}",lang:"js"}),a.a.createElement("p",null,"\u6ce8\u610f: \u5728",a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u8fc7\u7a0b\u4e2d",a.a.createElement("code",null,"current = unitOfWork.alternate;"),"\u4e0d\u4e3a",a.a.createElement("code",null,"null"),", \u540e\u7eed\u7684\u8c03\u7528\u903b\u8f91\u4e2d\u4f1a\u5927\u91cf\u4f7f\u7528\u6b64\u5904\u4f20\u5165\u7684",a.a.createElement("code",null,"current"),"."),a.a.createElement("h3",{id:"\u63a2\u5bfb\u9636\u6bb5-beginwork"},a.a.createElement(r["AnchorLink"],{to:"#\u63a2\u5bfb\u9636\u6bb5-beginwork","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u63a2\u5bfb\u9636\u6bb5 beginWork"),a.a.createElement("p",null,a.a.createElement("code",null,"beginWork(current, unitOfWork, subtreeRenderLanes)"),"(",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberBeginWork.old.js#L3083-L3494"},"\u6e90\u7801\u5730\u5740"),")."),a.a.createElement(c["a"],{code:"function beginWork(\n  current: Fiber | null,\n  workInProgress: Fiber,\n  renderLanes: Lanes,\n): Fiber | null {\n  const updateLanes = workInProgress.lanes;\n  if (current !== null) {\n    // \u8fdb\u5165\u5bf9\u6bd4\n    const oldProps = current.memoizedProps;\n    const newProps = workInProgress.pendingProps;\n    if (\n      oldProps !== newProps ||\n      hasLegacyContextChanged() ||\n      (__DEV__ ? workInProgress.type !== current.type : false)\n    ) {\n      didReceiveUpdate = true;\n    } else if (!includesSomeLane(renderLanes, updateLanes)) {\n      // \u5f53\u524d\u6e32\u67d3\u4f18\u5148\u7ea7renderLanes\u4e0d\u5305\u62ecfiber.lanes, \u8868\u660e\u5f53\u524dfiber\u8282\u70b9\u65e0\u9700\u66f4\u65b0\n      didReceiveUpdate = false;\n      switch (\n        workInProgress.tag\n        // switch \u8bed\u53e5\u4e2d\u5305\u62ec context\u76f8\u5173\u903b\u8f91, \u672c\u8282\u6682\u4e0d\u8ba8\u8bba(\u4e0d\u5f71\u54cd\u5206\u6790fiber\u6811\u6784\u9020)\n      ) {\n      }\n      // \u5f53\u524dfiber\u8282\u70b9\u65e0\u9700\u66f4\u65b0, \u8c03\u7528bailoutOnAlreadyFinishedWork\u5faa\u73af\u68c0\u6d4b\u5b50\u8282\u70b9\u662f\u5426\u9700\u8981\u66f4\u65b0\n      return bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes);\n    }\n  }\n  // \u4f59\u4e0b\u903b\u8f91\u4e0e\u521d\u6b21\u521b\u5efa\u5171\u7528\n  // 1. \u8bbe\u7f6eworkInProgress\u4f18\u5148\u7ea7\u4e3aNoLanes(\u6700\u9ad8\u4f18\u5148\u7ea7)\n  workInProgress.lanes = NoLanes;\n  // 2. \u6839\u636eworkInProgress\u8282\u70b9\u7684\u7c7b\u578b, \u7528\u4e0d\u540c\u7684\u65b9\u6cd5\u6d3e\u751f\u51fa\u5b50\u8282\u70b9\n  switch (\n    workInProgress.tag // \u53ea\u5217\u51fa\u90e8\u5206case\n  ) {\n    case ClassComponent: {\n      const Component = workInProgress.type;\n      const unresolvedProps = workInProgress.pendingProps;\n      const resolvedProps =\n        workInProgress.elementType === Component\n          ? unresolvedProps\n          : resolveDefaultProps(Component, unresolvedProps);\n      return updateClassComponent(\n        current,\n        workInProgress,\n        Component,\n        resolvedProps,\n        renderLanes,\n      );\n    }\n    case HostRoot:\n      return updateHostRoot(current, workInProgress, renderLanes);\n    case HostComponent:\n      return updateHostComponent(current, workInProgress, renderLanes);\n    case HostText:\n      return updateHostText(current, workInProgress);\n    case Fragment:\n      return updateFragment(current, workInProgress, renderLanes);\n  }\n}",lang:"js"}),a.a.createElement("h4",{id:"bailout\u903b\u8f91-bailout"},a.a.createElement(r["AnchorLink"],{to:"#bailout\u903b\u8f91-bailout","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),a.a.createElement("code",null,"bailout"),"\u903b\u8f91 ","{","#bailout","}"),a.a.createElement("blockquote",null,a.a.createElement("p",null,a.a.createElement("code",null,"bail out"),"\u82f1\u6587\u77ed\u8bed\u7ffb\u8bd1\u4e3a",a.a.createElement("code",null,"\u89e3\u6551, \u7ebe\u56f0"),", \u5728\u6e90\u7801\u4e2d, ",a.a.createElement("code",null,"bailout"),"\u7528\u4e8e\u5224\u65ad\u5b50\u6811\u8282\u70b9\u662f\u5426\u5b8c\u5168\u590d\u7528, \u5982\u679c\u53ef\u4ee5\u590d\u7528, \u5219\u4f1a\u7565\u8fc7 fiber \u6811\u6784\u9020.")),a.a.createElement("p",null,"\u4e0e",a.a.createElement("code",null,"\u521d\u6b21\u521b\u5efa"),"\u4e0d\u540c, \u5728",a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u8fc7\u7a0b\u4e2d, \u5982\u679c\u662f",a.a.createElement("code",null,"\u8001\u8282\u70b9"),", \u90a3\u4e48",a.a.createElement("code",null,"current !== null"),", \u9700\u8981\u8fdb\u884c\u5bf9\u6bd4, \u7136\u540e\u51b3\u5b9a\u662f\u5426\u590d\u7528\u8001\u8282\u70b9\u53ca\u5176\u5b50\u6811(\u5373",a.a.createElement("code",null,"bailout"),"\u903b\u8f91)."),a.a.createElement("ol",null,a.a.createElement("li",null,a.a.createElement("code",null,"!includesSomeLane(renderLanes, updateLanes)"),"\u8fd9\u4e2a\u5224\u65ad\u5206\u652f, \u5305\u542b\u4e86",a.a.createElement("code",null,"\u6e32\u67d3\u4f18\u5148\u7ea7"),"\u548c",a.a.createElement("code",null,"update\u4f18\u5148\u7ea7"),"\u7684\u6bd4\u8f83(\u8be6\u60c5\u53ef\u4ee5\u56de\u987e",a.a.createElement(r["AnchorLink"],{to:"./fibertree-prepare#%E4%BC%98%E5%85%88%E7%BA%A7"},"fiber \u6811\u6784\u9020(\u57fa\u7840\u51c6\u5907)"),"\u4e2d",a.a.createElement("code",null,"\u4f18\u5148\u7ea7"),"\u76f8\u5173\u89e3\u8bfb), \u5982\u679c\u5f53\u524d\u8282\u70b9\u65e0\u9700\u66f4\u65b0, \u5219\u4f1a\u8fdb\u5165",a.a.createElement("code",null,"bailout"),"\u903b\u8f91."),a.a.createElement("li",null,"\u6700\u540e\u4f1a\u8c03\u7528",a.a.createElement("code",null,"bailoutOnAlreadyFinishedWork"),":",a.a.createElement("ul",null,a.a.createElement("li",null,"\u5982\u679c\u540c\u65f6\u6ee1\u8db3",a.a.createElement("code",null,"!includesSomeLane(renderLanes, workInProgress.childLanes)"),", \u8868\u660e\u8be5 fiber \u8282\u70b9\u53ca\u5176\u5b50\u6811\u90fd\u65e0\u9700\u66f4\u65b0, \u53ef\u76f4\u63a5\u8fdb\u5165\u56de\u6eaf\u9636\u6bb5(",a.a.createElement("code",null,"completeUnitOfWork"),")"),a.a.createElement("li",null,"\u5982\u679c\u4e0d\u6ee1\u8db3",a.a.createElement("code",null,"!includesSomeLane(renderLanes, workInProgress.childLanes)"),", \u610f\u5473\u7740\u5b50\u8282\u70b9\u9700\u8981\u66f4\u65b0, ",a.a.createElement("code",null,"clone"),"\u5e76\u8fd4\u56de\u5b50\u8282\u70b9.")))),a.a.createElement(c["a"],{code:"// \u7701\u7565\u90e8\u5206\u65e0\u5173\u4ee3\u7801\nfunction bailoutOnAlreadyFinishedWork(\n  current: Fiber | null,\n  workInProgress: Fiber,\n  renderLanes: Lanes,\n): Fiber | null {\n  if (!includesSomeLane(renderLanes, workInProgress.childLanes)) {\n    // \u6e32\u67d3\u4f18\u5148\u7ea7\u4e0d\u5305\u62ec workInProgress.childLanes, \u8868\u660e\u5b50\u8282\u70b9\u4e5f\u65e0\u9700\u66f4\u65b0. \u8fd4\u56denull, \u76f4\u63a5\u8fdb\u5165\u56de\u6eaf\u9636\u6bb5.\n    return null;\n  } else {\n    // \u672cfiber\u867d\u7136\u4e0d\u7528\u66f4\u65b0, \u4f46\u662f\u5b50\u8282\u70b9\u9700\u8981\u66f4\u65b0. clone\u5e76\u8fd4\u56de\u5b50\u8282\u70b9\n    cloneChildFibers(current, workInProgress);\n    return workInProgress.child;\n  }\n}",lang:"js"}),a.a.createElement("p",null,"\u6ce8\u610f: ",a.a.createElement("code",null,"cloneChildFibers"),"\u5185\u90e8\u8c03\u7528",a.a.createElement("code",null,"createWorkInProgress"),", \u5728\u6784\u9020",a.a.createElement("code",null,"fiber"),"\u8282\u70b9\u65f6\u4f1a\u4f18\u5148\u590d\u7528",a.a.createElement("code",null,"workInProgress.alternate"),"(\u4e0d\u5f00\u8f9f\u65b0\u7684\u5185\u5b58\u7a7a\u95f4), \u5426\u5219\u624d\u4f1a\u521b\u5efa\u65b0\u7684",a.a.createElement("code",null,"fiber"),"\u5bf9\u8c61."),a.a.createElement("h4",{id:"updatexxx\u51fd\u6570"},a.a.createElement(r["AnchorLink"],{to:"#updatexxx\u51fd\u6570","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),a.a.createElement("code",null,"updateXXX"),"\u51fd\u6570"),a.a.createElement("p",null,a.a.createElement("code",null,"updateXXX"),"\u51fd\u6570(\u5982: updateHostRoot, updateClassComponent \u7b49)\u7684\u4e3b\u5e72\u903b\u8f91\u4e0e",a.a.createElement("code",null,"\u521d\u6b21\u6784\u9020"),"\u8fc7\u7a0b\u5b8c\u5168\u4e00\u81f4, \u603b\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u5411\u4e0b\u751f\u6210\u5b50\u8282\u70b9, \u5e76\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u8c03\u7528",a.a.createElement("code",null,"reconcileChildren"),"\u8c03\u548c\u51fd\u6570, \u53ea\u8981",a.a.createElement("code",null,"fiber"),"\u8282\u70b9\u6709\u526f\u4f5c\u7528, \u5c31\u4f1a\u628a\u7279\u6b8a\u64cd\u4f5c\u8bbe\u7f6e\u5230",a.a.createElement("code",null,"fiber.flags"),"(\u5982:",a.a.createElement("code",null,"\u8282\u70b9ref"),",",a.a.createElement("code",null,"class\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f"),",",a.a.createElement("code",null,"function\u7ec4\u4ef6\u7684hook"),",",a.a.createElement("code",null,"\u8282\u70b9\u5220\u9664"),"\u7b49)."),a.a.createElement("p",null,a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u8fc7\u7a0b\u7684\u4e0d\u540c\u4e4b\u5904:"),a.a.createElement("ol",null,a.a.createElement("li",null,a.a.createElement("code",null,"bailoutOnAlreadyFinishedWork"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u65f6\u5982\u679c\u9047\u5230\u5f53\u524d\u8282\u70b9\u65e0\u9700\u66f4\u65b0(\u5982: ",a.a.createElement("code",null,"class"),"\u7c7b\u578b\u7684\u8282\u70b9\u4e14",a.a.createElement("code",null,"shouldComponentUpdate"),"\u8fd4\u56de",a.a.createElement("code",null,"false"),"), \u4f1a\u518d\u6b21\u8fdb\u5165",a.a.createElement("code",null,"bailout"),"\u903b\u8f91."))),a.a.createElement("li",null,a.a.createElement("code",null,"reconcileChildren"),"\u8c03\u548c\u51fd\u6570",a.a.createElement("ul",null,a.a.createElement("li",null,"\u8c03\u548c\u51fd\u6570\u662f",a.a.createElement("code",null,"updateXXX"),"\u51fd\u6570\u4e2d\u7684\u4e00\u9879\u91cd\u8981\u903b\u8f91, \u5b83\u7684\u4f5c\u7528\u662f\u5411\u4e0b\u751f\u6210\u5b50\u8282\u70b9, \u5e76\u8bbe\u7f6e",a.a.createElement("code",null,"fiber.flags"),"."),a.a.createElement("li",null,a.a.createElement("code",null,"\u521d\u6b21\u521b\u5efa"),"\u65f6",a.a.createElement("code",null,"fiber"),"\u8282\u70b9\u6ca1\u6709\u6bd4\u8f83\u5bf9\u8c61, \u6240\u4ee5\u5728\u5411\u4e0b\u751f\u6210\u5b50\u8282\u70b9\u7684\u65f6\u5019\u6ca1\u6709\u4efb\u4f55\u591a\u4f59\u7684\u903b\u8f91, \u53ea\u7ba1\u521b\u5efa\u5c31\u884c."),a.a.createElement("li",null,a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u65f6\u9700\u8981\u628a",a.a.createElement("code",null,"ReactElement"),"\u5bf9\u8c61\u4e0e",a.a.createElement("code",null,"\u65e7fiber"),"\u5bf9\u8c61\u8fdb\u884c\u6bd4\u8f83, \u6765\u5224\u65ad\u662f\u5426\u9700\u8981\u590d\u7528",a.a.createElement("code",null,"\u65e7fiber"),"\u5bf9\u8c61.")))),a.a.createElement("p",null,"\u6ce8: \u672c\u8282\u7684\u91cd\u70b9\u662f",a.a.createElement("code",null,"fiber\u6811\u6784\u9020"),", \u5728",a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u8fc7\u7a0b\u4e2d",a.a.createElement("code",null,"reconcileChildren()\u51fd\u6570"),"\u5b9e\u73b0\u7684",a.a.createElement("code",null,"diff"),"\u7b97\u6cd5\u5341\u5206\u91cd\u8981, \u4f46\u662f\u5b83\u53ea\u662f\u5904\u4e8e\u7b97\u6cd5\u5c42\u9762, \u5bf9\u4e8e",a.a.createElement("code",null,"diff"),"\u7b97\u6cd5\u7684\u5b9e\u73b0,\u5728",a.a.createElement(r["Link"],{to:"../algorithm/diff"},"React \u7b97\u6cd5\u4e4b\u8c03\u548c\u7b97\u6cd5"),"\u4e2d\u5355\u72ec\u5206\u6790."),a.a.createElement("p",null,"\u672c\u8282\u53ea\u9700\u8981\u5148\u4e86\u89e3\u8c03\u548c\u51fd\u6570\u76ee\u7684:"),a.a.createElement("ol",null,a.a.createElement("li",null,"\u7ed9\u65b0\u589e,\u79fb\u52a8,\u548c\u5220\u9664\u8282\u70b9\u8bbe\u7f6e",a.a.createElement("code",null,"fiber.flags"),"(\u65b0\u589e,\u79fb\u52a8: ",a.a.createElement("code",null,"Placement"),", \u5220\u9664: ",a.a.createElement("code",null,"Deletion"),")"),a.a.createElement("li",null,"\u5982\u679c\u662f\u9700\u8981\u5220\u9664\u7684",a.a.createElement("code",null,"fiber"),", ",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactChildFiber.old.js#L275-L294"},"\u9664\u4e86\u81ea\u8eab\u6253\u4e0a",a.a.createElement("code",null,"Deletion"),"\u4e4b\u5916, \u8fd8\u8981\u5c06\u5176\u6dfb\u52a0\u5230\u7236\u8282\u70b9\u7684",a.a.createElement("code",null,"effects"),"\u94fe\u8868\u4e2d"),"(\u6b63\u5e38\u526f\u4f5c\u7528\u961f\u5217\u7684\u5904\u7406\u662f\u5728",a.a.createElement("code",null,"completeWork"),"\u51fd\u6570, \u4f46\u662f\u8be5\u8282\u70b9(\u88ab\u5220\u9664)\u4f1a\u8131\u79bb",a.a.createElement("code",null,"fiber"),"\u6811, \u4e0d\u4f1a\u518d\u8fdb\u5165",a.a.createElement("code",null,"completeWork"),"\u9636\u6bb5, \u6240\u4ee5\u5728",a.a.createElement("code",null,"beginWork"),"\u9636\u6bb5\u63d0\u524d\u52a0\u5165\u526f\u4f5c\u7528\u961f\u5217).")),a.a.createElement("h3",{id:"\u56de\u6eaf\u9636\u6bb5-completework"},a.a.createElement(r["AnchorLink"],{to:"#\u56de\u6eaf\u9636\u6bb5-completework","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u56de\u6eaf\u9636\u6bb5 completeWork"),a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork(unitOfWork)\u51fd\u6570"),"(",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberWorkLoop.old.js#L1670-L1802"},"\u6e90\u7801\u5730\u5740"),")\u5728",a.a.createElement("code",null,"\u521d\u6b21\u521b\u5efa"),"\u548c",a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),"\u903b\u8f91\u4e00\u81f4, \u90fd\u662f\u5904\u7406",a.a.createElement("code",null,"beginWork")," \u9636\u6bb5\u5df2\u7ecf\u521b\u5efa\u51fa\u6765\u7684 ",a.a.createElement("code",null,"fiber")," \u8282\u70b9, \u6700\u540e\u521b\u5efa(\u66f4\u65b0)DOM \u5bf9\u8c61, \u5e76\u4e0a\u79fb\u526f\u4f5c\u7528\u961f\u5217."),a.a.createElement("p",null,"\u5728\u8fd9\u91cc\u6211\u4eec\u91cd\u70b9\u5173\u6ce8",a.a.createElement("code",null,"completeWork"),"\u51fd\u6570\u4e2d, ",a.a.createElement("code",null,"current !== null"),"\u7684\u60c5\u51b5:"),a.a.createElement(c["a"],{code:"// ...\u7701\u7565\u65e0\u5173\u4ee3\u7801\nfunction completeWork(\n  current: Fiber | null,\n  workInProgress: Fiber,\n  renderLanes: Lanes,\n): Fiber | null {\n  const newProps = workInProgress.pendingProps;\n  switch (workInProgress.tag) {\n    case HostComponent: {\n      // \u975e\u6587\u672c\u8282\u70b9\n      popHostContext(workInProgress);\n      const rootContainerInstance = getRootHostContainer();\n      const type = workInProgress.type;\n      if (current !== null && workInProgress.stateNode != null) {\n        // \u5904\u7406\u6539\u52a8\n        updateHostComponent(\n          current,\n          workInProgress,\n          type,\n          newProps,\n          rootContainerInstance,\n        );\n        if (current.ref !== workInProgress.ref) {\n          markRef(workInProgress);\n        }\n      } else {\n        // ...\u7701\u7565\u65e0\u5173\u4ee3\u7801\n      }\n      return null;\n    }\n    case HostText: {\n      // \u6587\u672c\u8282\u70b9\n      const newText = newProps;\n      if (current && workInProgress.stateNode != null) {\n        const oldText = current.memoizedProps;\n        // \u5904\u7406\u6539\u52a8\n        updateHostText(current, workInProgress, oldText, newText);\n      } else {\n        // ...\u7701\u7565\u65e0\u5173\u4ee3\u7801\n      }\n      return null;\n    }\n  }\n}",lang:"js"}),a.a.createElement(c["a"],{code:"updateHostComponent = function(\n  current: Fiber,\n  workInProgress: Fiber,\n  type: Type,\n  newProps: Props,\n  rootContainerInstance: Container,\n) {\n  const oldProps = current.memoizedProps;\n  if (oldProps === newProps) {\n    return;\n  }\n  const instance: Instance = workInProgress.stateNode;\n  const currentHostContext = getHostContext();\n  const updatePayload = prepareUpdate(\n    instance,\n    type,\n    oldProps,\n    newProps,\n    rootContainerInstance,\n    currentHostContext,\n  );\n  workInProgress.updateQueue = (updatePayload: any);\n  // \u5982\u679c\u6709\u5c5e\u6027\u53d8\u52a8, \u8bbe\u7f6efiber.flags |= Update, \u7b49\u5f85`commit`\u9636\u6bb5\u7684\u5904\u7406\n  if (updatePayload) {\n    markUpdate(workInProgress);\n  }\n};\nupdateHostText = function(\n  current: Fiber,\n  workInProgress: Fiber,\n  oldText: string,\n  newText: string,\n) {\n  // \u5982\u679c\u6709\u5c5e\u6027\u53d8\u52a8, \u8bbe\u7f6efiber.flags |= Update, \u7b49\u5f85`commit`\u9636\u6bb5\u7684\u5904\u7406\n  if (oldText !== newText) {\n    markUpdate(workInProgress);\n  }\n};",lang:"js"}),a.a.createElement("p",null,"\u53ef\u4ee5\u770b\u5230\u5728\u66f4\u65b0\u8fc7\u7a0b\u4e2d, \u5982\u679c DOM \u5c5e\u6027\u6709\u53d8\u5316, \u4e0d\u4f1a\u518d\u6b21\u65b0\u5efa DOM \u5bf9\u8c61, \u800c\u662f\u8bbe\u7f6e",a.a.createElement("code",null,"fiber.flags |= Update"),", \u7b49\u5f85",a.a.createElement("code",null,"commit"),"\u9636\u6bb5\u5904\u7406(",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberCompleteWork.old.js#L197-L248"},"\u6e90\u7801\u94fe\u63a5"),")."),a.a.createElement("h3",{id:"\u8fc7\u7a0b\u56fe\u89e3"},a.a.createElement(r["AnchorLink"],{to:"#\u8fc7\u7a0b\u56fe\u89e3","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u8fc7\u7a0b\u56fe\u89e3"),a.a.createElement("p",null,"\u9488\u5bf9\u672c\u8282\u7684\u793a\u4f8b\u4ee3\u7801, \u5c06\u6574\u4e2a",a.a.createElement("code",null,"fiber"),"\u6811\u6784\u9020\u8fc7\u7a0b\u8868\u793a\u51fa\u6765:"),a.a.createElement("p",null,"\u6784\u9020\u524d:"),a.a.createElement("p",null,"\u5728\u4e0a\u6587\u5df2\u7ecf\u8bf4\u660e, \u8fdb\u5165\u5faa\u73af\u6784\u9020\u524d\u4f1a\u8c03\u7528",a.a.createElement("code",null,"prepareFreshStack"),"\u5237\u65b0\u6808\u5e27, \u5728\u8fdb\u5165",a.a.createElement("code",null,"fiber\u6811\u6784\u9020"),"\u5faa\u73af\u4e4b\u524d, \u4fdd\u6301\u8fd9\u8fd9\u4e2a\u521d\u59cb\u5316\u72b6\u6001:"),a.a.createElement("p",null,a.a.createElement("img",{src:l("Xchk"),alt:""})),a.a.createElement("p",null,a.a.createElement("code",null,"performUnitOfWork"),"\u7b2c 1 \u6b21\u8c03\u7528(\u53ea\u6267\u884c",a.a.createElement("code",null,"beginWork"),"):"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u6267\u884c\u524d: ",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411",a.a.createElement("code",null,"HostRootFiber.alternate"),"\u5bf9\u8c61, \u6b64\u65f6",a.a.createElement("code",null,"current = workInProgress.alternate"),"\u6307\u5411\u5f53\u524d\u9875\u9762\u5bf9\u5e94\u7684",a.a.createElement("code",null,"fiber"),"\u6811."),a.a.createElement("li",null,"\u6267\u884c\u8fc7\u7a0b:",a.a.createElement("ul",null,a.a.createElement("li",null,"\u56e0\u4e3a",a.a.createElement("code",null,"current !== null"),"\u4e14\u5f53\u524d\u8282\u70b9",a.a.createElement("code",null,"fiber.lanes"),"\u4e0d\u5728",a.a.createElement("code",null,"\u6e32\u67d3\u4f18\u5148\u7ea7"),"\u8303\u56f4\u5185, \u6545\u8fdb\u5165",a.a.createElement("code",null,"bailoutOnAlreadyFinishedWork"),"\u903b\u8f91"),a.a.createElement("li",null,"\u53c8\u56e0\u4e3a",a.a.createElement("code",null,"fiber.childLanes"),"\u5904\u4e8e",a.a.createElement("code",null,"\u6e32\u67d3\u4f18\u5148\u7ea7"),"\u8303\u56f4\u5185, \u8bc1\u660e",a.a.createElement("code",null,"child"),"\u8282\u70b9\u9700\u8981\u66f4\u65b0, \u514b\u9686",a.a.createElement("code",null,"workInProgress.child"),"\u8282\u70b9."),a.a.createElement("li",null,a.a.createElement("code",null,"clone"),"\u4e4b\u540e, ",a.a.createElement("code",null,"\u65b0fiber"),"\u8282\u70b9\u4f1a\u4e22\u5f03",a.a.createElement("code",null,"\u65e7fiber"),"\u4e0a\u7684\u6807\u5fd7\u4f4d(",a.a.createElement("code",null,"flags"),")\u548c\u526f\u4f5c\u7528(",a.a.createElement("code",null,"effects"),"), \u5176\u4ed6\u5c5e\u6027\u4f1a\u7ee7\u7eed\u4fdd\u7559."))),a.a.createElement("li",null,"\u6267\u884c\u540e: \u8fd4\u56de\u88ab",a.a.createElement("code",null,"clone"),"\u7684\u4e0b\u7ea7\u8282\u70b9",a.a.createElement("code",null,"fiber(<App/>)"),", \u79fb\u52a8",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411\u5b50\u8282\u70b9",a.a.createElement("code",null,"fiber(<App/>)"))),a.a.createElement("p",null,a.a.createElement("img",{src:l("JoUT"),alt:""})),a.a.createElement("p",null,a.a.createElement("code",null,"performUnitOfWork"),"\u7b2c 2 \u6b21\u8c03\u7528(\u53ea\u6267\u884c",a.a.createElement("code",null,"beginWork"),"):"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u6267\u884c\u524d: ",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411",a.a.createElement("code",null,"fiber(<App/>)"),"\u8282\u70b9, \u4e14",a.a.createElement("code",null,"current = workInProgress.alternate"),"\u6709\u503c"),a.a.createElement("li",null,"\u6267\u884c\u8fc7\u7a0b:",a.a.createElement("ul",null,a.a.createElement("li",null,"\u5f53\u524d\u8282\u70b9",a.a.createElement("code",null,"fiber.lanes"),"\u5904\u4e8e",a.a.createElement("code",null,"\u6e32\u67d3\u4f18\u5148\u7ea7"),"\u8303\u56f4\u5185, \u4f1a\u8fdb\u5165",a.a.createElement("code",null,"updateClassComponent()"),"\u51fd\u6570"),a.a.createElement("li",null,"\u5728",a.a.createElement("code",null,"updateClassComponent()"),"\u51fd\u6570\u4e2d, \u8c03\u7528",a.a.createElement("code",null,"reconcileChildren()"),"\u751f\u6210\u4e0b\u7ea7\u5b50\u8282\u70b9."))),a.a.createElement("li",null,"\u6267\u884c\u540e: \u8fd4\u56de\u4e0b\u7ea7\u8282\u70b9",a.a.createElement("code",null,"fiber(<Header/>)"),", \u79fb\u52a8",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411\u5b50\u8282\u70b9",a.a.createElement("code",null,"fiber(<Header/>)"))),a.a.createElement("p",null,a.a.createElement("img",{src:l("zOcv"),alt:""})),a.a.createElement("p",null,a.a.createElement("code",null,"performUnitOfWork"),"\u7b2c 3 \u6b21\u8c03\u7528(\u6267\u884c",a.a.createElement("code",null,"beginWork"),"\u548c",a.a.createElement("code",null,"completeUnitOfWork"),"):"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"beginWork"),"\u6267\u884c\u524d: ",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411",a.a.createElement("code",null,"fiber(<Header/>)"),", \u4e14",a.a.createElement("code",null,"current = workInProgress.alternate"),"\u6709\u503c"),a.a.createElement("li",null,a.a.createElement("code",null,"beginWork"),"\u6267\u884c\u8fc7\u7a0b:",a.a.createElement("ul",null,a.a.createElement("li",null,"\u5f53\u524d\u8282\u70b9",a.a.createElement("code",null,"fiber.lanes"),"\u5904\u4e8e",a.a.createElement("code",null,"\u6e32\u67d3\u4f18\u5148\u7ea7"),"\u8303\u56f4\u5185, \u4f1a\u8fdb\u5165",a.a.createElement("code",null,"updateClassComponent()"),"\u51fd\u6570"),a.a.createElement("li",null,"\u5728",a.a.createElement("code",null,"updateClassComponent()"),"\u51fd\u6570\u4e2d, \u7531\u4e8e\u6b64\u7ec4\u4ef6\u662f",a.a.createElement("code",null,"PureComponent"),", ",a.a.createElement("code",null,"shouldComponentUpdate"),"\u5224\u5b9a\u4e3a",a.a.createElement("code",null,"false"),",\u6545\u8fdb\u5165",a.a.createElement("code",null,"bailoutOnAlreadyFinishedWork"),"\u903b\u8f91."),a.a.createElement("li",null,"\u53c8\u56e0\u4e3a",a.a.createElement("code",null,"fiber.childLanes"),"\u4e0d\u5728",a.a.createElement("code",null,"\u6e32\u67d3\u4f18\u5148\u7ea7"),"\u8303\u56f4\u5185, \u8bc1\u660e",a.a.createElement("code",null,"child"),"\u8282\u70b9\u4e5f\u4e0d\u9700\u8981\u66f4\u65b0"))),a.a.createElement("li",null,a.a.createElement("code",null,"beginWork"),"\u6267\u884c\u540e: \u56e0\u4e3a\u5b8c\u5168\u6ee1\u8db3",a.a.createElement("code",null,"bailout"),"\u903b\u8f91, \u8fd4\u56de",a.a.createElement("code",null,"null"),". \u6240\u4ee5\u8fdb\u5165",a.a.createElement("code",null,"completeUnitOfWork(unitOfWork)"),"\u51fd\u6570, \u4f20\u5165\u7684\u53c2\u6570",a.a.createElement("code",null,"unitOfWork"),"\u5b9e\u9645\u4e0a\u5c31\u662f",a.a.createElement("code",null,"workInProgress"),"(\u6b64\u65f6\u6307\u5411",a.a.createElement("code",null,"fiber(<Header/>)"),")")),a.a.createElement("p",null,a.a.createElement("img",{src:l("/Hwl"),alt:""})),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u6267\u884c\u524d: ",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411",a.a.createElement("code",null,"fiber(<Header/>)")),a.a.createElement("li",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u6267\u884c\u8fc7\u7a0b: \u4ee5",a.a.createElement("code",null,"fiber(<Header/>)"),"\u4e3a\u8d77\u70b9, \u5411\u4e0a\u56de\u6eaf")),a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u7b2c 1 \u6b21\u5faa\u73af:"),a.a.createElement("ol",null,a.a.createElement("li",null,"\u6267\u884c",a.a.createElement("code",null,"completeWork"),"\u51fd\u6570: ",a.a.createElement("code",null,"class"),"\u7c7b\u578b\u7684\u7ec4\u4ef6\u65e0\u9700\u5904\u7406."),a.a.createElement("li",null,"\u4e0a\u79fb\u526f\u4f5c\u7528\u961f\u5217: \u7531\u4e8e\u672c\u8282\u70b9",a.a.createElement("code",null,"fiber(header)"),"\u6ca1\u6709\u526f\u4f5c\u7528(",a.a.createElement("code",null,"fiber.flags = 0"),"), \u6240\u4ee5\u6267\u884c\u4e4b\u540e\u526f\u4f5c\u7528\u961f\u5217\u6ca1\u6709\u5b9e\u8d28\u53d8\u5316(\u76ee\u524d\u4e3a\u7a7a)."),a.a.createElement("li",null,"\u5411\u4e0a\u56de\u6eaf: \u7531\u4e8e\u8fd8\u6709\u5144\u5f1f\u8282\u70b9, \u628a",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411\u4e0b\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9",a.a.createElement("code",null,"fiber(button)"),", \u9000\u51fa",a.a.createElement("code",null,"completeUnitOfWork"),".")),a.a.createElement("p",null,a.a.createElement("img",{src:l("b75X"),alt:""})),a.a.createElement("p",null,a.a.createElement("code",null,"performUnitOfWork"),"\u7b2c 4 \u6b21\u8c03\u7528(\u6267\u884c",a.a.createElement("code",null,"beginWork"),"\u548c",a.a.createElement("code",null,"completeUnitOfWork"),"):"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"beginWork"),"\u6267\u884c\u8fc7\u7a0b: \u8c03\u7528",a.a.createElement("code",null,"updateHostComponent")),a.a.createElement("ul",null,a.a.createElement("li",null,"\u672c\u793a\u4f8b\u4e2d",a.a.createElement("code",null,"button"),"\u7684\u5b50\u8282\u70b9\u662f\u4e00\u4e2a",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/8e5adfbd7e605bda9c5e96c10e015b3dc0df688e/packages/react-dom/src/client/ReactDOMHostConfig.js#L350-L361"},"\u76f4\u63a5\u6587\u672c\u8282\u70b9"),",\u8bbe\u7f6e",a.a.createElement(r["Link"],{to:"https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberBeginWork.old.js#L1147"},"nextChildren = null"),"(\u6e90\u7801\u6ce8\u91ca\u7684\u89e3\u91ca\u662f\u4e0d\u7528\u5728\u5f00\u8f9f\u5185\u5b58\u53bb\u521b\u5efa\u4e00\u4e2a\u6587\u672c\u8282\u70b9, \u540c\u65f6\u8fd8\u80fd\u51cf\u5c11\u5411\u4e0b\u904d\u5386)."),a.a.createElement("li",null,"\u7531\u4e8e",a.a.createElement("code",null,"nextChildren = null"),", \u7ecf\u8fc7",a.a.createElement("code",null,"reconcileChildren"),"\u9636\u6bb5\u5904\u7406\u540e, \u8fd4\u56de\u503c\u4e5f\u662f",a.a.createElement("code",null,"null")))),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"beginWork"),"\u6267\u884c\u540e: \u7531\u4e8e\u4e0b\u7ea7\u8282\u70b9\u4e3a",a.a.createElement("code",null,"null"),", \u6240\u4ee5\u8fdb\u5165",a.a.createElement("code",null,"completeUnitOfWork(unitOfWork)"),"\u51fd\u6570, \u4f20\u5165\u7684\u53c2\u6570",a.a.createElement("code",null,"unitOfWork"),"\u5b9e\u9645\u4e0a\u5c31\u662f",a.a.createElement("code",null,"workInProgress"),"(\u6b64\u65f6\u6307\u5411",a.a.createElement("code",null,"fiber(button)"),"\u8282\u70b9)")),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u6267\u884c\u8fc7\u7a0b: \u4ee5",a.a.createElement("code",null,"fiber(button)"),"\u4e3a\u8d77\u70b9, \u5411\u4e0a\u56de\u6eaf"))),a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u7b2c 1 \u6b21\u5faa\u73af:"),a.a.createElement("ol",null,a.a.createElement("li",null,"\u6267\u884c",a.a.createElement("code",null,"completeWork"),"\u51fd\u6570",a.a.createElement("ul",null,a.a.createElement("li",null,"\u56e0\u4e3a",a.a.createElement("code",null,"fiber(button).stateNode != null"),", \u6240\u4ee5\u65e0\u9700\u518d\u6b21\u521b\u5efa DOM \u5bf9\u8c61. \u53ea\u9700\u8981\u8fdb\u4e00\u6b65\u8c03\u7528",a.a.createElement("code",null,"updateHostComponent()"),"\u8bb0\u5f55 DOM \u5c5e\u6027\u6539\u52a8\u60c5\u51b5"),a.a.createElement("li",null,"\u5728",a.a.createElement("code",null,"updateHostComponent()"),"\u51fd\u6570\u4e2d, \u53c8\u56e0\u4e3a",a.a.createElement("code",null,"oldProps === newProps"),", \u6240\u4ee5\u65e0\u9700\u8bb0\u5f55\u6539\u52a8\u60c5\u51b5, \u76f4\u63a5\u8fd4\u56de"))),a.a.createElement("li",null,"\u4e0a\u79fb\u526f\u4f5c\u7528\u961f\u5217: \u7531\u4e8e\u672c\u8282\u70b9",a.a.createElement("code",null,"fiber(button)"),"\u6ca1\u6709\u526f\u4f5c\u7528(",a.a.createElement("code",null,"fiber.flags = 0"),"), \u6240\u4ee5\u6267\u884c\u4e4b\u540e\u526f\u4f5c\u7528\u961f\u5217\u6ca1\u6709\u5b9e\u8d28\u53d8\u5316(\u76ee\u524d\u4e3a\u7a7a)."),a.a.createElement("li",null,"\u5411\u4e0a\u56de\u6eaf: \u7531\u4e8e\u8fd8\u6709\u5144\u5f1f\u8282\u70b9, \u628a",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411\u4e0b\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9",a.a.createElement("code",null,"fiber(div)"),", \u9000\u51fa",a.a.createElement("code",null,"completeUnitOfWork"),".")),a.a.createElement("p",null,a.a.createElement("img",{src:l("E5lV"),alt:""})),a.a.createElement("p",null,a.a.createElement("code",null,"performUnitOfWork"),"\u7b2c 5 \u6b21\u8c03\u7528(\u6267\u884c",a.a.createElement("code",null,"beginWork"),"):"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u6267\u884c\u524d: ",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411",a.a.createElement("code",null,"fiber(div)"),"\u8282\u70b9, \u4e14",a.a.createElement("code",null,"current = workInProgress.alternate"),"\u6709\u503c"),a.a.createElement("li",null,"\u6267\u884c\u8fc7\u7a0b:",a.a.createElement("ul",null,a.a.createElement("li",null,"\u5728",a.a.createElement("code",null,"updateHostComponent()"),"\u51fd\u6570\u4e2d, \u8c03\u7528",a.a.createElement("code",null,"reconcileChildren()"),"\u751f\u6210\u4e0b\u7ea7\u5b50\u8282\u70b9."),a.a.createElement("li",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f, \u4e0b\u7ea7\u5b50\u8282\u70b9\u662f\u4e00\u4e2a\u53ef\u8fed\u4ee3\u6570\u7ec4, \u4f1a\u628a",a.a.createElement("code",null,"fiber.child.sibling"),"\u4e00\u8d77\u6784\u9020\u51fa\u6765, \u540c\u65f6\u6839\u636e\u9700\u8981\u8bbe\u7f6e",a.a.createElement("code",null,"fiber.flags"),". \u5728\u672c\u4f8b\u4e2d, \u4e0b\u7ea7\u8282\u70b9\u6709\u88ab\u5220\u9664\u7684\u60c5\u51b5, \u88ab\u5220\u9664\u7684\u8282\u70b9\u4f1a\u88ab\u6dfb\u52a0\u5230\u7236\u8282\u70b9\u7684\u526f\u4f5c\u7528\u961f\u5217\u4e2d(\u5177\u4f53\u5b9e\u73b0\u65b9\u5f0f\u8bf7\u53c2\u8003",a.a.createElement(r["Link"],{to:"../algorithm/diff"},"React \u7b97\u6cd5\u4e4b\u8c03\u548c\u7b97\u6cd5"),")."))),a.a.createElement("li",null,"\u6267\u884c\u540e: \u8fd4\u56de\u4e0b\u7ea7\u8282\u70b9",a.a.createElement("code",null,"fiber(p)"),", \u79fb\u52a8",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411\u5b50\u8282\u70b9",a.a.createElement("code",null,"fiber(p)"))),a.a.createElement("p",null,a.a.createElement("img",{src:l("tUJF"),alt:""})),a.a.createElement("p",null,a.a.createElement("code",null,"performUnitOfWork"),"\u7b2c 6 \u6b21\u8c03\u7528(\u6267\u884c",a.a.createElement("code",null,"beginWork"),"\u548c",a.a.createElement("code",null,"completeUnitOfWork"),"):"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"beginWork"),"\u6267\u884c\u8fc7\u7a0b: \u4e0e\u7b2c 4 \u6b21\u8c03\u7528\u4e2d\u6784\u5efa",a.a.createElement("code",null,"fiber(button)"),"\u7684\u903b\u8f91\u5b8c\u5168\u4e00\u81f4, \u56e0\u4e3a\u90fd\u662f\u76f4\u63a5\u6587\u672c\u8282\u70b9, ",a.a.createElement("code",null,"reconcileChildren()"),"\u8fd4\u56de\u7684\u4e0b\u7ea7\u5b50\u8282\u70b9\u4e3a null.")),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"beginWork"),"\u6267\u884c\u540e: \u7531\u4e8e\u4e0b\u7ea7\u8282\u70b9\u4e3a",a.a.createElement("code",null,"null"),", \u6240\u4ee5\u8fdb\u5165",a.a.createElement("code",null,"completeUnitOfWork(unitOfWork)"),"\u51fd\u6570")),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u6267\u884c\u8fc7\u7a0b: \u4ee5",a.a.createElement("code",null,"fiber(p)"),"\u4e3a\u8d77\u70b9, \u5411\u4e0a\u56de\u6eaf"))),a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u7b2c 1 \u6b21\u5faa\u73af:"),a.a.createElement("ol",null,a.a.createElement("li",null,"\u6267\u884c",a.a.createElement("code",null,"completeWork"),"\u51fd\u6570",a.a.createElement("ul",null,a.a.createElement("li",null,"\u56e0\u4e3a",a.a.createElement("code",null,"fiber(p).stateNode != null"),", \u6240\u4ee5\u65e0\u9700\u518d\u6b21\u521b\u5efa DOM \u5bf9\u8c61. \u5728",a.a.createElement("code",null,"updateHostComponent()"),"\u51fd\u6570\u4e2d, \u53c8\u56e0\u4e3a\u8282\u70b9\u5c5e\u6027\u6ca1\u6709\u53d8\u52a8, \u6240\u4ee5\u65e0\u9700\u6253\u6807\u8bb0"))),a.a.createElement("li",null,"\u4e0a\u79fb\u526f\u4f5c\u7528\u961f\u5217: \u672c\u8282\u70b9",a.a.createElement("code",null,"fiber(p)"),"\u6ca1\u6709\u526f\u4f5c\u7528(",a.a.createElement("code",null,"fiber.flags = 0"),")."),a.a.createElement("li",null,"\u5411\u4e0a\u56de\u6eaf: \u7531\u4e8e\u8fd8\u6709\u5144\u5f1f\u8282\u70b9, \u628a",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411\u4e0b\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9",a.a.createElement("code",null,"fiber(p)"),", \u9000\u51fa",a.a.createElement("code",null,"completeUnitOfWork"),".")),a.a.createElement("p",null,a.a.createElement("img",{src:l("9MJJ"),alt:""})),a.a.createElement("p",null,a.a.createElement("code",null,"performUnitOfWork"),"\u7b2c 7 \u6b21\u8c03\u7528(\u6267\u884c",a.a.createElement("code",null,"beginWork"),"\u548c",a.a.createElement("code",null,"completeUnitOfWork"),"):"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"beginWork"),"\u6267\u884c\u8fc7\u7a0b: \u4e0e\u7b2c 4 \u6b21\u8c03\u7528\u4e2d\u6784\u5efa",a.a.createElement("code",null,"fiber(button)"),"\u7684\u903b\u8f91\u5b8c\u5168\u4e00\u81f4, \u56e0\u4e3a\u90fd\u662f\u76f4\u63a5\u6587\u672c\u8282\u70b9, ",a.a.createElement("code",null,"reconcileChildren()"),"\u8fd4\u56de\u7684\u4e0b\u7ea7\u5b50\u8282\u70b9\u4e3a null.")),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"beginWork"),"\u6267\u884c\u540e: \u7531\u4e8e\u4e0b\u7ea7\u8282\u70b9\u4e3a",a.a.createElement("code",null,"null"),", \u6240\u4ee5\u8fdb\u5165",a.a.createElement("code",null,"completeUnitOfWork(unitOfWork)"),"\u51fd\u6570")),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u6267\u884c\u8fc7\u7a0b: \u4ee5",a.a.createElement("code",null,"fiber(p)"),"\u4e3a\u8d77\u70b9, \u5411\u4e0a\u56de\u6eaf"))),a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u7b2c 1 \u6b21\u5faa\u73af:"),a.a.createElement("ol",null,a.a.createElement("li",null,a.a.createElement("p",null,"\u6267\u884c",a.a.createElement("code",null,"completeWork"),"\u51fd\u6570:"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u56e0\u4e3a",a.a.createElement("code",null,"fiber(p).stateNode != null"),", \u6240\u4ee5\u65e0\u9700\u518d\u6b21\u521b\u5efa DOM \u5bf9\u8c61. \u5728",a.a.createElement("code",null,"updateHostComponent()"),"\u51fd\u6570\u4e2d, \u53c8\u56e0\u4e3a\u8282\u70b9\u5c5e\u6027\u6ca1\u6709\u53d8\u52a8, \u6240\u4ee5\u65e0\u9700\u6253\u6807\u8bb0"))),a.a.createElement("li",null,a.a.createElement("p",null,"\u4e0a\u79fb\u526f\u4f5c\u7528\u961f\u5217: \u672c\u8282\u70b9",a.a.createElement("code",null,"fiber(p)"),"\u6709\u526f\u4f5c\u7528(",a.a.createElement("code",null,"fiber.flags = Placement"),"), \u9700\u8981\u5c06\u5176\u6dfb\u52a0\u5230\u7236\u8282\u70b9\u7684\u526f\u4f5c\u7528\u961f\u5217\u4e4b\u540e.")),a.a.createElement("li",null,a.a.createElement("p",null,"\u5411\u4e0a\u56de\u6eaf: \u7531\u4e8e\u8fd8\u6709\u5144\u5f1f\u8282\u70b9, \u628a",a.a.createElement("code",null,"workInProgress"),"\u6307\u5411\u4e0b\u4e00\u4e2a\u5144\u5f1f\u8282\u70b9",a.a.createElement("code",null,"fiber(p)"),", \u9000\u51fa",a.a.createElement("code",null,"completeUnitOfWork"),"."))),a.a.createElement("p",null,a.a.createElement("img",{src:l("0bM2"),alt:""})),a.a.createElement("p",null,a.a.createElement("code",null,"performUnitOfWork"),"\u7b2c 8 \u6b21\u8c03\u7528(\u6267\u884c",a.a.createElement("code",null,"beginWork"),"\u548c",a.a.createElement("code",null,"completeUnitOfWork"),"):"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"beginWork"),"\u6267\u884c\u8fc7\u7a0b: \u672c\u8282\u70b9",a.a.createElement("code",null,"fiber(p)"),"\u662f\u4e00\u4e2a\u65b0\u589e\u8282\u70b9, \u5176",a.a.createElement("code",null,"current === null"),", \u4f1a\u8fdb\u5165",a.a.createElement("code",null,"updateHostComponent()"),"\u51fd\u6570. \u56e0\u4e3a\u662f\u76f4\u63a5\u6587\u672c\u8282\u70b9, ",a.a.createElement("code",null,"reconcileChildren()"),"\u8fd4\u56de\u7684\u4e0b\u7ea7\u5b50\u8282\u70b9\u4e3a null.")),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"beginWork"),"\u6267\u884c\u540e: \u7531\u4e8e\u4e0b\u7ea7\u8282\u70b9\u4e3a",a.a.createElement("code",null,"null"),", \u6240\u4ee5\u8fdb\u5165",a.a.createElement("code",null,"completeUnitOfWork(unitOfWork)"),"\u51fd\u6570")),a.a.createElement("li",null,a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u6267\u884c\u8fc7\u7a0b: \u4ee5",a.a.createElement("code",null,"fiber(p)"),"\u4e3a\u8d77\u70b9, \u5411\u4e0a\u56de\u6eaf"))),a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u7b2c 1 \u6b21\u5faa\u73af:"),a.a.createElement("ol",null,a.a.createElement("li",null,"\u6267\u884c",a.a.createElement("code",null,"completeWork"),"\u51fd\u6570: \u7531\u4e8e\u672c\u8282\u70b9\u662f\u4e00\u4e2a\u65b0\u589e\u8282\u70b9,\u4e14",a.a.createElement("code",null,"fiber(p).stateNode === null"),", \u6240\u4ee5\u521b\u5efa",a.a.createElement("code",null,"fiber(p)"),"\u8282\u70b9\u5bf9\u5e94\u7684",a.a.createElement("code",null,"DOM"),"\u5b9e\u4f8b, \u6302\u8f7d\u5230",a.a.createElement("code",null,"fiber.stateNode"),"\u4e4b\u4e0a."),a.a.createElement("li",null,"\u4e0a\u79fb\u526f\u4f5c\u7528\u961f\u5217: \u672c\u8282\u70b9",a.a.createElement("code",null,"fiber(p)"),"\u6709\u526f\u4f5c\u7528(",a.a.createElement("code",null,"fiber.flags = Placement"),"), \u9700\u8981\u5c06\u5176\u6dfb\u52a0\u5230\u7236\u8282\u70b9\u7684\u526f\u4f5c\u7528\u961f\u5217\u4e4b\u540e."),a.a.createElement("li",null,"\u5411\u4e0a\u56de\u6eaf: \u7531\u4e8e\u6ca1\u6709\u5144\u5f1f\u8282\u70b9, \u628a",a.a.createElement("code",null,"workInProgress"),"\u6307\u9488\u6307\u5411\u7236\u8282\u70b9",a.a.createElement("code",null,"fiber(div)"),".")),a.a.createElement("p",null,a.a.createElement("img",{src:l("dSH0"),alt:""})),a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u7b2c 2 \u6b21\u5faa\u73af:"),a.a.createElement("ol",null,a.a.createElement("li",null,"\u6267\u884c",a.a.createElement("code",null,"completeWork"),"\u51fd\u6570: \u7531\u4e8e",a.a.createElement("code",null,"div"),"\u7ec4\u4ef6\u6ca1\u6709\u5c5e\u6027\u53d8\u52a8, \u6545",a.a.createElement("code",null,"updateHostComponent()"),"\u6ca1\u6709\u8bbe\u7f6e\u526f\u4f5c\u7528\u6807\u8bb0"),a.a.createElement("li",null,"\u4e0a\u79fb\u526f\u4f5c\u7528\u961f\u5217: \u672c\u8282\u70b9",a.a.createElement("code",null,"fiber(div)"),"\u7684\u526f\u4f5c\u7528\u961f\u5217\u6dfb\u52a0\u5230\u7236\u8282\u70b9\u7684\u526f\u4f5c\u7528\u961f\u5217\u4e4b\u540e."),a.a.createElement("li",null,"\u5411\u4e0a\u56de\u6eaf: \u7531\u4e8e\u6ca1\u6709\u5144\u5f1f\u8282\u70b9, \u628a",a.a.createElement("code",null,"workInProgress"),"\u6307\u9488\u6307\u5411\u7236\u8282\u70b9",a.a.createElement("code",null,"fiber(<App/>)"))),a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u7b2c 3 \u6b21\u5faa\u73af:"),a.a.createElement("ol",null,a.a.createElement("li",null,"\u6267\u884c",a.a.createElement("code",null,"completeWork"),"\u51fd\u6570: class \u7c7b\u578b\u7684\u8282\u70b9\u65e0\u9700\u5904\u7406"),a.a.createElement("li",null,"\u4e0a\u79fb\u526f\u4f5c\u7528\u961f\u5217: \u672c\u8282\u70b9",a.a.createElement("code",null,"fiber(<App/>)"),"\u7684\u526f\u4f5c\u7528\u961f\u5217\u6dfb\u52a0\u5230\u7236\u8282\u70b9\u7684\u526f\u4f5c\u7528\u961f\u5217\u4e4b\u540e."),a.a.createElement("li",null,"\u5411\u4e0a\u56de\u6eaf: \u7531\u4e8e\u6ca1\u6709\u5144\u5f1f\u8282\u70b9, \u628a",a.a.createElement("code",null,"workInProgress"),"\u6307\u9488\u6307\u5411\u7236\u8282\u70b9",a.a.createElement("code",null,"fiber(HostRootFiber)"))),a.a.createElement("p",null,a.a.createElement("code",null,"completeUnitOfWork"),"\u7b2c 4 \u6b21\u5faa\u73af:"),a.a.createElement("ol",null,a.a.createElement("li",null,"\u6267\u884c",a.a.createElement("code",null,"completeWork"),"\u51fd\u6570: ",a.a.createElement("code",null,"HostRoot"),"\u7c7b\u578b\u7684\u8282\u70b9\u65e0\u9700\u5904\u7406"),a.a.createElement("li",null,"\u5411\u4e0a\u56de\u6eaf: \u7531\u4e8e\u7236\u8282\u70b9\u4e3a\u7a7a, \u65e0\u9700\u8fdb\u5165\u5904\u7406\u526f\u4f5c\u7528\u961f\u5217\u7684\u903b\u8f91. \u6700\u540e\u8bbe\u7f6e",a.a.createElement("code",null,"workInProgress=null"),", \u5e76\u9000\u51fa",a.a.createElement("code",null,"completeUnitOfWork")),a.a.createElement("li",null,"\u91cd\u7f6e",a.a.createElement("code",null,"fiber.childLanes"))),a.a.createElement("p",null,"\u5230\u6b64\u6574\u4e2a",a.a.createElement("code",null,"fiber\u6811\u6784\u9020\u5faa\u73af(\u5bf9\u6bd4\u66f4\u65b0)"),"\u5df2\u7ecf\u6267\u884c\u5b8c\u6bd5, \u62e5\u6709\u4e00\u68f5\u65b0\u7684",a.a.createElement("code",null,"fiber\u6811"),", \u5e76\u4e14\u5728",a.a.createElement("code",null,"fiber\u6811"),"\u7684\u6839\u8282\u70b9\u4e0a\u6302\u8f7d\u4e86\u526f\u4f5c\u7528\u961f\u5217. ",a.a.createElement("code",null,"renderRootSync"),"\u51fd\u6570\u9000\u51fa\u4e4b\u524d, \u4f1a\u91cd\u7f6e",a.a.createElement("code",null,"workInProgressRoot = null"),", \u8868\u660e\u6ca1\u6709\u6b63\u5728\u8fdb\u884c\u4e2d\u7684",a.a.createElement("code",null,"render"),". \u4e14\u628a\u6700\u65b0\u7684",a.a.createElement("code",null,"fiber\u6811"),"\u6302\u8f7d\u5230",a.a.createElement("code",null,"fiberRoot.finishedWork"),"\u4e0a. \u8fd9\u65f6\u6574\u4e2a fiber \u6811\u7684\u5185\u5b58\u7ed3\u6784\u5982\u4e0b(\u6ce8\u610f",a.a.createElement("code",null,"fiberRoot.finishedWork"),"\u548c",a.a.createElement("code",null,"fiberRoot.current"),"\u6307\u9488,\u5728",a.a.createElement("code",null,"commitRoot"),"\u9636\u6bb5\u4f1a\u8fdb\u884c\u5904\u7406):"),a.a.createElement("p",null,a.a.createElement("img",{src:l("sD8s"),alt:""})),a.a.createElement("p",null,"\u65e0\u8bba\u662f",a.a.createElement("code",null,"\u521d\u6b21\u6784\u9020"),"\u6216\u8005\u662f",a.a.createElement("code",null,"\u5bf9\u6bd4\u66f4\u65b0"),", \u5f53",a.a.createElement("code",null,"fiber\u6811\u6784\u9020"),"\u5b8c\u6210\u4e4b\u540e, \u4f59\u4e0b\u7684\u903b\u8f91\u51e0\u4e4e\u4e00\u81f4, \u5728",a.a.createElement(r["Link"],{to:"./fibertree-commit"},"fiber \u6811\u6e32\u67d3"),"\u4e2d\u7ee7\u7eed\u8ba8\u8bba."),a.a.createElement("h2",{id:"\u603b\u7ed3"},a.a.createElement(r["AnchorLink"],{to:"#\u603b\u7ed3","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u603b\u7ed3"),a.a.createElement("p",null,"\u672c\u8282\u6f14\u793a\u4e86\u66f4\u65b0\u9636\u6bb5",a.a.createElement("code",null,"fiber\u6811\u6784\u9020(\u5bf9\u6bd4\u66f4\u65b0)"),"\u7684\u5168\u90e8\u8fc7\u7a0b, \u8ddf\u8e2a\u4e86\u521b\u5efa\u8fc7\u7a0b\u4e2d\u5185\u5b58\u5f15\u7528\u7684\u53d8\u5316\u60c5\u51b5. \u4e0e",a.a.createElement("code",null,"\u521d\u6b21\u6784\u9020"),"\u6700\u5927\u7684\u4e0d\u540c\u5728\u4e8e",a.a.createElement("code",null,"fiber\u8282\u70b9"),"\u662f\u5426\u53ef\u4ee5\u590d\u7528, \u5176\u4e2d",a.a.createElement("code",null,"bailout"),"\u903b\u8f91\u662f",a.a.createElement("code",null,"fiber\u5b50\u6811"),"\u80fd\u5426\u590d\u7528\u7684\u5224\u65ad\u4f9d\u636e.")))}));n["default"]=e=>{var n=a.a.useContext(r["context"]),l=n.demos;return a.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),a.a.createElement(o,{demos:l})}},"y8D+":function(e,n,l){e.exports=l.p+"static/markupdatelane.254e1c79.png"},zOcv:function(e,n,l){e.exports=l.p+"static/unitofwork2.efa559e5.png"}}]);